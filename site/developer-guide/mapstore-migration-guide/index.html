
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mapstore.geosolutionsgroup.com/developer-guide/mapstore-migration-guide/">
      
      
        <link rel="prev" href="../documentation-guidelines/">
      
      
        <link rel="next" href="../release/">
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.6">
    
    
      
        <title>Migration - MapStore</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0e669242.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../theme/css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#migration-guidelines" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MapStore" class="md-header__button md-logo" aria-label="MapStore" data-md-component="logo">
      
  <img src="../../img/mapstore2-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MapStore
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Migration
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/geosolutions-it/MapStore2/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    geosolutions-it/MapStore2
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Navigation tabs -->
<nav
  class="md-tabs"
  aria-label="Tabs"
  data-md-component="tabs"
>
  <div class="md-grid">
    <div style="display: flex; justify-content: space-between">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/home-page/" class="md-tabs__link">
          
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../requirements/" class="md-tabs__link">
          
  
    
  
  Developer Guide

        </a>
      </li>
    
  

      
    </ul>
    <ul class="md-tabs__list">
       <li class="md-tabs__item pull-right">
          <a href="https://github.com/geosolutions-it/MapStore2/releases"
            class="md-tabs__link" target="_blank">Downloads</a>
      </li>
      <li class="md-tabs__item pull-right">
          <a href="https://mapstore.geosolutionsgroup.com/mapstore/docs/api/plugins"
            class="md-tabs__link" target="_blank">Plugins</a>
      </li>
      <li class="md-tabs__item pull-right">
          <a href="https://mapstore.geosolutionsgroup.com/mapstore/docs/api/jsapi"
            class="md-tabs__link" target="_blank">JavaScript API</a>
      </li>
      <li class="md-tabs__item pull-right">
          <a href="https://mapstore.geosolutionsgroup.com/mapstore/docs/api/framework"
            class="md-tabs__link" target="_blank">Framework API</a>
      </li>
      <li class="md-tabs__item pull-right export-pdf-li" style="display:flex;" title="Export PDF"></li>
    </ul>
    </div>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MapStore" class="md-nav__button md-logo" aria-label="MapStore" data-md-component="logo">
      
  <img src="../../img/mapstore2-logo.png" alt="logo">

    </a>
    MapStore
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/geosolutions-it/MapStore2/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    geosolutions-it/MapStore2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Home
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_1">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/home-page/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home Page Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Managing Users and Groups
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Managing Users and Groups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/managing-users-and-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/managing-users/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing Users
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/managing-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing Groups
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Managing Contexts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Managing Contexts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/managing-contexts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/application-context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Context
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/extension-library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extension Library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/map-catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Map Catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/map-templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Map Templates
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/resources-properties/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources Properties
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/share/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sharing Resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exploring Maps
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Exploring Maps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/exploring-maps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/toc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Table of Contents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/layer-settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing Layer Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/filtering-layers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filtering Layers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/attributes-table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attribute Table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/widgets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Widgets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/export-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Export Layer Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/mapstore-toolbars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MapStore Toolbars
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/print/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Printing a Map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/import/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Importing and Exporting Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Catalog Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/measure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performing Measurments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/map-views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Map Views
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/street-view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Street View
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/longitudinal-profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Longitudinal Profile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/geoprocessing-tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GeoProcessing Tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/navigation-toolbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Navigation Toolbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/background/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Background Selector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/timeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timeline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/footer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Footer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exploring Dashboards
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Exploring Dashboards
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/exploring-dashboards/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/adding-widgets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding widgets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/connecting-widgets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting widgets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exploring Stories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Exploring Stories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/exploring-stories/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/story-setting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Story Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/title-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Title Section
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/banner-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Banner Section
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/paragraph-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Paragraph Section
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/immersive-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Immersive Section
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/geocarousel-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GeoCarousel Section
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/media-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Media Section
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/web-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Page section
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/text-editor-toolbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text Editor Toolbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/content-image-toolbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Toolbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/content-video-toolbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video Toolbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/content-map-toolbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Map Toolbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/content-web-toolbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Page Toolbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/media-editor-window/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Media Editor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/configure-map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configue the map
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Developer Guide
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../main-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Main Scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure-and-general-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Infrastructure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developing with MapStore
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Developing with MapStore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../developing-with-mapstore-2-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../project-structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folders Structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../developing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing and Debugging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../building-and-deploying/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building and Deploying
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reactjs-and-redux-introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Front End Technologies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../plugins-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../internationalization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Internationalization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../custom-dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom dependencies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../customize-theme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Styling and theming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../printing-module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Printing Module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-use-a-cdn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to use CDN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dev-faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" checked>
        
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guidelines
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Guidelines
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../code-conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Conventions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../documentation-guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Migration
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Migration
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-update-checklist" class="md-nav__link">
    General update checklist
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20240102-to-20240200" class="md-nav__link">
    Migration from 2024.01.02 to 2024.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2024.01.02 to 2024.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodejs-and-npm-update" class="md-nav__link">
    NodeJS and NPM update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java-dependencies-update" class="md-nav__link">
    Java dependencies update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20240100-to-20240102" class="md-nav__link">
    Migration from 2024.01.00 to 2024.01.02
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2024.01.00 to 2024.01.02">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-showing-creditsattribution-text-in-print-config" class="md-nav__link">
    Enable showing credits/attribution text in Print config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-to-hide-the-group-info-of-logged-in-user-from-user-details-modal-window" class="md-nav__link">
    Option to hide the group info of logged in user from user details modal window
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-with-openid-connect" class="md-nav__link">
    Integration with openID Connect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20230202-to-20240100" class="md-nav__link">
    Migration from 2023.02.02 to 2024.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2023.02.02 to 2024.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toc-plugin-refactor" class="md-nav__link">
    TOC plugin refactor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#introduction-of-metadatainfo-plugin" class="md-nav__link">
    Introduction of MetadataInfo plugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maven-project-update" class="md-nav__link">
    Maven project update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-update" class="md-nav__link">
    Database update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restructuring-of-login-and-home-in-dashboard-page" class="md-nav__link">
    Restructuring of Login and Home in Dashboard page
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-elevation-layer-type-instead-of-wms-layer-with-useforelevation-property" class="md-nav__link">
    Using elevation layer type instead of wms layer with useForElevation property
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-possibility-to-add-custom-fonts-to-the-map" class="md-nav__link">
    Removing possibility to add custom fonts to the Map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixing-background-config" class="md-nav__link">
    Fixing background config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-spatial-filter-to-dashboard-widgets" class="md-nav__link">
    Adding spatial filter to dashboard widgets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapfish-print-update" class="md-nav__link">
    MapFish Print update
  </a>
  
    <nav class="md-nav" aria-label="MapFish Print update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#print-config-file-update" class="md-nav__link">
    Print config file update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotations-plugin-refactor" class="md-nav__link">
    Annotations plugin refactor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20230102-to-20230200" class="md-nav__link">
    Migration from 2023.01.02 to 2023.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2023.01.02 to 2023.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-plugin-cfg-changes" class="md-nav__link">
    About plugin cfg changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodejsnpm-upgrade" class="md-nav__link">
    NodeJS/NPM upgrade
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualization-mode-in-map-configuration" class="md-nav__link">
    Visualization mode in map configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clean-up-of-old-maven-repositories" class="md-nav__link">
    Clean up of old maven repositories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-permalink-plugin" class="md-nav__link">
    New Permalink plugin
  </a>
  
    <nav class="md-nav" aria-label="New Permalink plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-permalink-plugin-to-localconfigjson" class="md-nav__link">
    Add Permalink plugin to localConfig.json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-permalink-in-new-contexts" class="md-nav__link">
    Using Permalink in new contexts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-update_1" class="md-nav__link">
    Database Update
  </a>
  
    <nav class="md-nav" aria-label="Database Update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgresql" class="md-nav__link">
    PostgreSQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#h2" class="md-nav__link">
    H2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle" class="md-nav__link">
    Oracle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20220202-to-20230100" class="md-nav__link">
    Migration from 2022.02.02 to 2023.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2022.02.02 to 2023.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log4j-update-to-log4j2" class="md-nav__link">
    Log4j update to Log4j2
  </a>
  
    <nav class="md-nav" aria-label="Log4j update to Log4j2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log4j2-properties-file-migration" class="md-nav__link">
    log4j2 properties file migration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log4j2-dependencies-and-code-update" class="md-nav__link">
    log4j2 dependencies and code update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-database-schema" class="md-nav__link">
    Update database schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20220200-to-20220201" class="md-nav__link">
    Migration from 2022.02.00 to 2022.02.01
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2022.02.00 to 2022.02.01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packagejson-scripts-migration" class="md-nav__link">
    Package.json scripts migration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20220102-to-20220200" class="md-nav__link">
    Migration from 2022.01.02 to 2022.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2022.01.02 to 2022.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#html-pages-optimization" class="md-nav__link">
    HTML pages optimization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-pluginsjs-to-make-upstream-plugins-use-dynamic-import" class="md-nav__link">
    Update plugins.js to make upstream plugins use dynamic import
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-plugin-has-been-removed" class="md-nav__link">
    Version plugin has been removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#support-for-openid" class="md-nav__link">
    Support for OpenID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrading-the-printing-engine" class="md-nav__link">
    Upgrading the printing engine
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replacing-burgermenu-with-sidebarmenu" class="md-nav__link">
    Replacing BurgerMenu with SidebarMenu
  </a>
  
    <nav class="md-nav" aria-label="Replacing BurgerMenu with SidebarMenu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-sidebar-menu-in-new-contexts" class="md-nav__link">
    Using Sidebar Menu in new contexts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-existing-contexts-to-use-sidebar-menu" class="md-nav__link">
    Updating existing contexts to use Sidebar Menu
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-extensions" class="md-nav__link">
    Updating extensions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-terrain-layer-type-to-define-3d-map-elevation-profile" class="md-nav__link">
    Using terrain layer type to define 3D map elevation profile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20220100-to-20220101" class="md-nav__link">
    Migration from 2022.01.00 to 2022.01.01
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2022.01.00 to 2022.01.01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mailinglists-plugin-has-been-removed" class="md-nav__link">
    MailingLists plugin has been removed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210202-to-20220100" class="md-nav__link">
    Migration from 2021.02.02 to 2022.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.02.02 to 2022.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updating-projects-configuration" class="md-nav__link">
    Updating projects configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrading-cesiumjs" class="md-nav__link">
    Upgrading CesiumJS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210201-to-20210202" class="md-nav__link">
    Migration from 2021.02.01 to 2021.02.02
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.02.01 to 2021.02.02">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#style-parsers-dynamic-import" class="md-nav__link">
    Style parsers dynamic import
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210200-to-20210201" class="md-nav__link">
    Migration from 2021.02.00 to 2021.02.01
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.02.00 to 2021.02.01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#align-pomxml-files" class="md-nav__link">
    Align pom.xml files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210104-to-20210200" class="md-nav__link">
    Migration from 2021.01.04 to 2021.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.01.04 to 2021.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#theme-updates-and-css-variables" class="md-nav__link">
    Theme updates and CSS variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#project-system" class="md-nav__link">
    Project system
  </a>
  
    <nav class="md-nav" aria-label="Project system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minor-changes-to-prod-webpackconfigjs" class="md-nav__link">
    Minor changes to prod-webpack.config.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#move-front-end-configuration-files-in-configs-folder" class="md-nav__link">
    Move front-end configuration files in configs folder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#back-end-has-been-reorganized" class="md-nav__link">
    Back-end has been reorganized
  </a>
  
    <nav class="md-nav" aria-label="Back-end has been reorganized">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#align-pomxml-files-to-latest-versions-of-the-libs" class="md-nav__link">
    Align pom.xml files to latest versions of the libs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-the-webxml-and-change-the-servletxml-files-to-expose-the-new-services" class="md-nav__link">
    Edit the web.xml and change the *-servlet.xml files to expose the new services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-directory-has-been-reorganized-and-is-now-available-also-for-product" class="md-nav__link">
    Data directory has been reorganized and is now available also for product
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurations" class="md-nav__link">
    Configurations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210101-to-20210103" class="md-nav__link">
    Migration from 2021.01.01 to 2021.01.03
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210100-to-20210101" class="md-nav__link">
    Migration from 2021.01.00 to 2021.01.01
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.01.00 to 2021.01.01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-embedded-entry-to-load-the-correct-configuration" class="md-nav__link">
    Update embedded entry to load the correct configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locate-plugin-configuration" class="md-nav__link">
    Locate plugin configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-an-existing-project-to-include-embedded-dashboards-and-geostories" class="md-nav__link">
    Update an existing project to include embedded Dashboards and GeoStories
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20200200-to-20210100" class="md-nav__link">
    Migration from 2020.02.00 to 2021.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2020.02.00 to 2021.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-to-webpack-5-module-federation" class="md-nav__link">
    Update to webpack 5 - Module federation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eslint-config" class="md-nav__link">
    Eslint config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-structure-review" class="md-nav__link">
    App structure review
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20200100-to-20200200" class="md-nav__link">
    Migration from 2020.01.00 to 2020.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2020.01.00 to 2020.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-authentication-rule-for-internal-services" class="md-nav__link">
    New authentication rule for internal services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#translation-files" class="md-nav__link">
    Translation files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-update_2" class="md-nav__link">
    Database Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-update" class="md-nav__link">
    Backend update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20190201-to-20200100" class="md-nav__link">
    Migration from 2019.02.01 to 2020.01.00
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20190100-to-20190101" class="md-nav__link">
    Migration from 2019.01.00 to 2019.01.01
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20170500-to-20180100" class="md-nav__link">
    Migration from 2017.05.00 to 2018.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2017.05.00 to 2018.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#support-jstheme-versioning-in-your-project" class="md-nav__link">
    Support js/theme versioning in your project
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20170500-to-20170300-and-previews" class="md-nav__link">
    Migration from 2017.05.00 to 2017.03.00 and previews
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20170100-to-20170200" class="md-nav__link">
    Migration from 2017.01.00 to 2017.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2017.01.00 to 2017.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#side-effect-management-introduced-redux-observable" class="md-nav__link">
    Side Effect Management - Introduced redux-observable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webpack-update-to-version-2" class="md-nav__link">
    Webpack update to version 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#react-intl-update-to-2x" class="md-nav__link">
    react-intl update to  2.x
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#react-update-to-1542" class="md-nav__link">
    react update to 15.4.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#react-bootstrap-update" class="md-nav__link">
    React Bootstrap update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../release/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            How to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dev-how-to/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dev How To
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../plugins-howto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../writing-epics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Epics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../writing-actions-reducers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Actions and Reducers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../configuration-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../local-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../plugins-documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../maps-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Map Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../externalized-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Externalize Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../context-editor-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration of Application Context Manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../LayerFilter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../vector-style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Styles
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../database-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10_1" >
        
          <label class="md-nav__link" for="__nav_3_10_1" id="__nav_3_10_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Users
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_10_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10_1">
            <span class="md-nav__icon md-icon"></span>
            Users
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/users/ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/users/openId/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenID Connect
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/users/keycloak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keycloak
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/users/keycloak-sso-impl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keycloak-SSO
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10_2" >
        
          <label class="md-nav__link" for="__nav_3_10_2" id="__nav_3_10_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    General
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10_2">
            <span class="md-nav__icon md-icon"></span>
            General
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/geoserver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GeoServer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/infrastructure-setups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Infrastructure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_11" >
        
          <label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Projects
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_11">
            <span class="md-nav__icon md-icon"></span>
            Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../mapstore-projects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MapStore Projects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../project-creation-script/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Creation Script
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-project-customization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Project Customization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Communicating with MapStore
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            Communicating with MapStore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../API-usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../map-query-parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MapViewer query paramaters
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-update-checklist" class="md-nav__link">
    General update checklist
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20240102-to-20240200" class="md-nav__link">
    Migration from 2024.01.02 to 2024.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2024.01.02 to 2024.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodejs-and-npm-update" class="md-nav__link">
    NodeJS and NPM update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java-dependencies-update" class="md-nav__link">
    Java dependencies update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20240100-to-20240102" class="md-nav__link">
    Migration from 2024.01.00 to 2024.01.02
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2024.01.00 to 2024.01.02">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-showing-creditsattribution-text-in-print-config" class="md-nav__link">
    Enable showing credits/attribution text in Print config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-to-hide-the-group-info-of-logged-in-user-from-user-details-modal-window" class="md-nav__link">
    Option to hide the group info of logged in user from user details modal window
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-with-openid-connect" class="md-nav__link">
    Integration with openID Connect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20230202-to-20240100" class="md-nav__link">
    Migration from 2023.02.02 to 2024.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2023.02.02 to 2024.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toc-plugin-refactor" class="md-nav__link">
    TOC plugin refactor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#introduction-of-metadatainfo-plugin" class="md-nav__link">
    Introduction of MetadataInfo plugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maven-project-update" class="md-nav__link">
    Maven project update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-update" class="md-nav__link">
    Database update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restructuring-of-login-and-home-in-dashboard-page" class="md-nav__link">
    Restructuring of Login and Home in Dashboard page
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-elevation-layer-type-instead-of-wms-layer-with-useforelevation-property" class="md-nav__link">
    Using elevation layer type instead of wms layer with useForElevation property
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-possibility-to-add-custom-fonts-to-the-map" class="md-nav__link">
    Removing possibility to add custom fonts to the Map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixing-background-config" class="md-nav__link">
    Fixing background config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-spatial-filter-to-dashboard-widgets" class="md-nav__link">
    Adding spatial filter to dashboard widgets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapfish-print-update" class="md-nav__link">
    MapFish Print update
  </a>
  
    <nav class="md-nav" aria-label="MapFish Print update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#print-config-file-update" class="md-nav__link">
    Print config file update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotations-plugin-refactor" class="md-nav__link">
    Annotations plugin refactor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20230102-to-20230200" class="md-nav__link">
    Migration from 2023.01.02 to 2023.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2023.01.02 to 2023.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-plugin-cfg-changes" class="md-nav__link">
    About plugin cfg changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodejsnpm-upgrade" class="md-nav__link">
    NodeJS/NPM upgrade
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualization-mode-in-map-configuration" class="md-nav__link">
    Visualization mode in map configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clean-up-of-old-maven-repositories" class="md-nav__link">
    Clean up of old maven repositories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-permalink-plugin" class="md-nav__link">
    New Permalink plugin
  </a>
  
    <nav class="md-nav" aria-label="New Permalink plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-permalink-plugin-to-localconfigjson" class="md-nav__link">
    Add Permalink plugin to localConfig.json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-permalink-in-new-contexts" class="md-nav__link">
    Using Permalink in new contexts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-update_1" class="md-nav__link">
    Database Update
  </a>
  
    <nav class="md-nav" aria-label="Database Update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgresql" class="md-nav__link">
    PostgreSQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#h2" class="md-nav__link">
    H2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle" class="md-nav__link">
    Oracle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20220202-to-20230100" class="md-nav__link">
    Migration from 2022.02.02 to 2023.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2022.02.02 to 2023.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log4j-update-to-log4j2" class="md-nav__link">
    Log4j update to Log4j2
  </a>
  
    <nav class="md-nav" aria-label="Log4j update to Log4j2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log4j2-properties-file-migration" class="md-nav__link">
    log4j2 properties file migration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log4j2-dependencies-and-code-update" class="md-nav__link">
    log4j2 dependencies and code update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-database-schema" class="md-nav__link">
    Update database schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20220200-to-20220201" class="md-nav__link">
    Migration from 2022.02.00 to 2022.02.01
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2022.02.00 to 2022.02.01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packagejson-scripts-migration" class="md-nav__link">
    Package.json scripts migration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20220102-to-20220200" class="md-nav__link">
    Migration from 2022.01.02 to 2022.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2022.01.02 to 2022.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#html-pages-optimization" class="md-nav__link">
    HTML pages optimization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-pluginsjs-to-make-upstream-plugins-use-dynamic-import" class="md-nav__link">
    Update plugins.js to make upstream plugins use dynamic import
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-plugin-has-been-removed" class="md-nav__link">
    Version plugin has been removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#support-for-openid" class="md-nav__link">
    Support for OpenID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrading-the-printing-engine" class="md-nav__link">
    Upgrading the printing engine
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replacing-burgermenu-with-sidebarmenu" class="md-nav__link">
    Replacing BurgerMenu with SidebarMenu
  </a>
  
    <nav class="md-nav" aria-label="Replacing BurgerMenu with SidebarMenu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-sidebar-menu-in-new-contexts" class="md-nav__link">
    Using Sidebar Menu in new contexts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-existing-contexts-to-use-sidebar-menu" class="md-nav__link">
    Updating existing contexts to use Sidebar Menu
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-extensions" class="md-nav__link">
    Updating extensions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-terrain-layer-type-to-define-3d-map-elevation-profile" class="md-nav__link">
    Using terrain layer type to define 3D map elevation profile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20220100-to-20220101" class="md-nav__link">
    Migration from 2022.01.00 to 2022.01.01
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2022.01.00 to 2022.01.01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mailinglists-plugin-has-been-removed" class="md-nav__link">
    MailingLists plugin has been removed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210202-to-20220100" class="md-nav__link">
    Migration from 2021.02.02 to 2022.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.02.02 to 2022.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updating-projects-configuration" class="md-nav__link">
    Updating projects configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrading-cesiumjs" class="md-nav__link">
    Upgrading CesiumJS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210201-to-20210202" class="md-nav__link">
    Migration from 2021.02.01 to 2021.02.02
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.02.01 to 2021.02.02">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#style-parsers-dynamic-import" class="md-nav__link">
    Style parsers dynamic import
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210200-to-20210201" class="md-nav__link">
    Migration from 2021.02.00 to 2021.02.01
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.02.00 to 2021.02.01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#align-pomxml-files" class="md-nav__link">
    Align pom.xml files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210104-to-20210200" class="md-nav__link">
    Migration from 2021.01.04 to 2021.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.01.04 to 2021.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#theme-updates-and-css-variables" class="md-nav__link">
    Theme updates and CSS variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#project-system" class="md-nav__link">
    Project system
  </a>
  
    <nav class="md-nav" aria-label="Project system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minor-changes-to-prod-webpackconfigjs" class="md-nav__link">
    Minor changes to prod-webpack.config.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#move-front-end-configuration-files-in-configs-folder" class="md-nav__link">
    Move front-end configuration files in configs folder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#back-end-has-been-reorganized" class="md-nav__link">
    Back-end has been reorganized
  </a>
  
    <nav class="md-nav" aria-label="Back-end has been reorganized">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#align-pomxml-files-to-latest-versions-of-the-libs" class="md-nav__link">
    Align pom.xml files to latest versions of the libs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-the-webxml-and-change-the-servletxml-files-to-expose-the-new-services" class="md-nav__link">
    Edit the web.xml and change the *-servlet.xml files to expose the new services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-directory-has-been-reorganized-and-is-now-available-also-for-product" class="md-nav__link">
    Data directory has been reorganized and is now available also for product
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurations" class="md-nav__link">
    Configurations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210101-to-20210103" class="md-nav__link">
    Migration from 2021.01.01 to 2021.01.03
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20210100-to-20210101" class="md-nav__link">
    Migration from 2021.01.00 to 2021.01.01
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2021.01.00 to 2021.01.01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-embedded-entry-to-load-the-correct-configuration" class="md-nav__link">
    Update embedded entry to load the correct configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locate-plugin-configuration" class="md-nav__link">
    Locate plugin configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-an-existing-project-to-include-embedded-dashboards-and-geostories" class="md-nav__link">
    Update an existing project to include embedded Dashboards and GeoStories
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20200200-to-20210100" class="md-nav__link">
    Migration from 2020.02.00 to 2021.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2020.02.00 to 2021.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-to-webpack-5-module-federation" class="md-nav__link">
    Update to webpack 5 - Module federation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eslint-config" class="md-nav__link">
    Eslint config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-structure-review" class="md-nav__link">
    App structure review
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20200100-to-20200200" class="md-nav__link">
    Migration from 2020.01.00 to 2020.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2020.01.00 to 2020.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-authentication-rule-for-internal-services" class="md-nav__link">
    New authentication rule for internal services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#translation-files" class="md-nav__link">
    Translation files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-update_2" class="md-nav__link">
    Database Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-update" class="md-nav__link">
    Backend update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20190201-to-20200100" class="md-nav__link">
    Migration from 2019.02.01 to 2020.01.00
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20190100-to-20190101" class="md-nav__link">
    Migration from 2019.01.00 to 2019.01.01
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20170500-to-20180100" class="md-nav__link">
    Migration from 2017.05.00 to 2018.01.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2017.05.00 to 2018.01.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#support-jstheme-versioning-in-your-project" class="md-nav__link">
    Support js/theme versioning in your project
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20170500-to-20170300-and-previews" class="md-nav__link">
    Migration from 2017.05.00 to 2017.03.00 and previews
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-20170100-to-20170200" class="md-nav__link">
    Migration from 2017.01.00 to 2017.02.00
  </a>
  
    <nav class="md-nav" aria-label="Migration from 2017.01.00 to 2017.02.00">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#side-effect-management-introduced-redux-observable" class="md-nav__link">
    Side Effect Management - Introduced redux-observable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webpack-update-to-version-2" class="md-nav__link">
    Webpack update to version 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#react-intl-update-to-2x" class="md-nav__link">
    react-intl update to  2.x
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#react-update-to-1542" class="md-nav__link">
    react update to 15.4.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#react-bootstrap-update" class="md-nav__link">
    React Bootstrap update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="migration-guidelines">Migration Guidelines</h1>
<h2 id="general-update-checklist">General update checklist</h2>
<ul>
<li>updating an existing installation</li>
<li>updating a MapStore project created for a previous version</li>
</ul>
<p>To update an existing installation you usually have to do nothing except eventually to execute queries on your database to update the changes to the database schema.</p>
<p>In case of a project it becomes a little more complicated, depending on the customization.</p>
<p>This is a list of things to check if you want to update from a previous version valid for every version.</p>
<ul>
<li>Take a list to migration notes below for your version</li>
<li>Take a look to the release notes</li>
<li>update your <code>package.json</code> to latest libs versions</li>
<li>take a look at your custom files to see if there are some changes (e.g. <code>localConfig.js</code>, <code>proxy.properties</code>)</li>
<li>Some changes that may need to be ported could be present also in <code>pom.xml</code> files and in <code>configs</code> directory.</li>
<li>check for changes also in <code>web/src/main/webapp/WEB-INF/web.xml</code>.</li>
<li>Optionally check also accessory files like <code>.eslinrc</code>, if you want to keep aligned with lint standards.</li>
<li>Follow the instructions below, in order, from your version to the one you want to update to.</li>
</ul>
<h2 id="migration-from-20240102-to-20240200">Migration from 2024.01.02 to 2024.02.00</h2>
<h3 id="nodejs-and-npm-update">NodeJS and NPM update</h3>
<p>From this version the <strong>recommended version</strong> to build MapStore or for development is <strong>Node 20</strong> (<strong>minimum</strong> version will be <strong>Node 16</strong>).
Please update your Node version accordingly on your develop machine or CI/CD.</p>
<p>See the <a href="../requirements/#debug-build">requirements</a> section of the documentation for the details.</p>
<p>The same for projects of derived <code>MapStoreExtensions</code>. Make sure to:</p>
<ul>
<li>Update <code>package.json</code> with the new versions of webpack and other dependencies.</li>
<li>Remove and regenerate your <code>package-lock.json</code> with <code>npm install</code> after updating the Node version.</li>
</ul>
<p>Here the diff used for MapStore Extensions to update the <code>package.json</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="gh">diff --git a/package.json b/package.json</span>
<span class="gh">index 62ddda0..62ce070 100644</span>
<span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="gu">@@ -44,6 +44,7 @@</span>
<span class="w"> </span>    &quot;@geosolutions/jsdoc&quot;: &quot;3.4.4&quot;,
<span class="w"> </span>    &quot;@geosolutions/mocha&quot;: &quot;6.2.1-3&quot;,
<span class="w"> </span>    &quot;@mapstore/eslint-config-mapstore&quot;: &quot;1.0.5&quot;,
<span class="gi">+    &quot;@testing-library/react&quot;: &quot;12.1.5&quot;,</span>
<span class="w"> </span>    &quot;axios-mock-adapter&quot;: &quot;1.16.0&quot;,
<span class="w"> </span>    &quot;babel-loader&quot;: &quot;8.0.5&quot;,
<span class="w"> </span>    &quot;babel-plugin-add-module-exports&quot;: &quot;0.1.4&quot;,
<span class="gu">@@ -66,8 +67,8 @@</span>
<span class="w"> </span>    &quot;expect&quot;: &quot;1.20.1&quot;,
<span class="w"> </span>    &quot;file-loader&quot;: &quot;2.0.0&quot;,
<span class="w"> </span>    &quot;glob&quot;: &quot;7.1.1&quot;,
<span class="gd">-        &quot;html-loader&quot;: &quot;0.5.1&quot;,</span>
<span class="gd">-        &quot;html-webpack-plugin&quot;: &quot;4.5.0&quot;,</span>
<span class="gi">+    &quot;html-loader&quot;: &quot;2.0.0&quot;,</span>
<span class="gi">+    &quot;html-webpack-plugin&quot;: &quot;5.2.0&quot;,</span>
<span class="w"> </span>    &quot;jsdoc-jsx&quot;: &quot;0.1.0&quot;,
<span class="w"> </span>    &quot;karma&quot;: &quot;6.4.0&quot;,
<span class="w"> </span>    &quot;karma-chrome-launcher&quot;: &quot;3.1.1&quot;,
<span class="gu">@@ -104,9 +105,10 @@</span>
<span class="w"> </span>    &quot;rimraf&quot;: &quot;2.5.2&quot;,
<span class="w"> </span>    &quot;simple-git&quot;: &quot;2.20.1&quot;,
<span class="w"> </span>    &quot;style-loader&quot;: &quot;2.0.0&quot;,
<span class="gi">+    &quot;terser&quot;: &quot;5.18.1&quot;,</span>
<span class="w"> </span>    &quot;url-loader&quot;: &quot;0.5.7&quot;,
<span class="w"> </span>    &quot;vusion-webfonts-generator&quot;: &quot;0.4.1&quot;,
<span class="gd">-        &quot;webpack&quot;: &quot;5.9.0&quot;,</span>
<span class="gi">+    &quot;webpack&quot;: &quot;5.54.0&quot;,</span>
<span class="w"> </span>    &quot;webpack-bundle-size-analyzer&quot;: &quot;2.0.2&quot;,
<span class="w"> </span>    &quot;webpack-cli&quot;: &quot;4.10.0&quot;,
<span class="w"> </span>    &quot;webpack-dev-server&quot;: &quot;3.11.0&quot;,
</code></pre></div>
<h3 id="java-dependencies-update">Java dependencies update</h3>
<p>Some libraries has been updated. if you have a MapStore project make sure to keep the versions aligned with the main product.</p>
<h2 id="migration-from-20240100-to-20240102">Migration from 2024.01.00 to 2024.01.02</h2>
<h3 id="enable-showing-creditsattribution-text-in-print-config">Enable showing credits/attribution text in Print config</h3>
<p>Due to showing layers' credits/attributions of printed map which will be displayed at the bottom of the map section, the MapStore <code>config.yaml</code> file should be reviewed and updated. Below are reported the relevant changes that need to be applied also to <code>config.yaml</code> of MapStore downstream projects where the printing engine is present.</p>
<ul>
<li>Added a section for credits into <code>config.yaml</code> file at the end of the mainPage for each layout, for more details see <a href="https://github.com/geosolutions-it/MapStore2/pull/10451/files#diff-3599ba7c628c7c764665046828bad74c0c8576aad03f5497cf426b59010a6d07R27">here</a></li>
<li>In this added section, proper values for <code>absoluteX</code> and <code>absoluteY</code> should be applied to be consistent with overall layout</li>
<li>There are some edits to the value of <code>absoluteY</code> for the section located directly above credit/attribution section based on the layout</li>
</ul>
<p>example:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nt">mainPage</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">....</span>
<span class="w">    </span><span class="nt">items</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">....</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!columns</span>
<span class="w">        </span><span class="nt">absoluteX</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">42</span>
<span class="w">        </span><span class="nt">absoluteY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">35</span>
<span class="w">        </span><span class="nt">width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1111</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!text</span>
<span class="w">            </span><span class="nt">align</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">left</span>
<span class="w">            </span><span class="nt">vertAlign</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">middle</span>
<span class="w">            </span><span class="nt">fontSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">text</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;${credits}&#39;</span>
</code></pre></div>
<h3 id="option-to-hide-the-group-info-of-logged-in-user-from-user-details-modal-window">Option to hide the group info of logged in user from user details modal window</h3>
<p>Recently, we have added the option to hide the <code>user group info</code> from the user details modal.
To enable this, you have to add a cfg in all <code>Login</code> plugin into <code>localConfig.json</code> like:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Login&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;cfg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;toolsCfg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;hideGroupUserInfo&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>where the first index of toolsCfg is for <code>userDetails</code> component that is responsible for displaying the user details including <code>user group info</code></p>
<p>!!! note important notes should be considered:</p>
<ul>
<li>if you have customized the Login plugin and in particular the order of toolsCfg, make sure to override the correct one as the propagation of cfg for the tools is based on index value.</li>
</ul>
<h3 id="integration-with-openid-connect">Integration with openID Connect</h3>
<p>A generic OpenID Connect (OIDC) authentication support has been introduced in MapStore. This feature allows to authenticate users using an OIDC provider, like Keycloak, Okta, Google, Azure, etc.</p>
<p>To provide this functionality, it is necessary to update the project's <code>geostore-spring-security.xml</code> file, if the default one is not used.
If you are using the default one, you can skip this step.</p>
<p>Here the changes to apply if needed:</p>
<div class="highlight"><pre><span></span><code><span class="gu">@@ -24,6 +24,7 @@</span>
<span class="w"> </span>        &lt;security:custom-filter ref=&quot;sessionTokenProcessingFilter&quot; after=&quot;FORM_LOGIN_FILTER&quot;/&gt;
<span class="w"> </span>        &lt;security:custom-filter ref=&quot;keycloakFilter&quot; before=&quot;BASIC_AUTH_FILTER&quot;/&gt;
<span class="w"> </span>        &lt;security:custom-filter ref=&quot;googleOpenIdFilter&quot; after=&quot;BASIC_AUTH_FILTER&quot;/&gt;
<span class="gi">+        &lt;security:custom-filter ref=&quot;oidcOpenIdFilter&quot; before=&quot;OPENID_FILTER&quot;/&gt; &lt;!-- ADD a filter with this ref --&gt;</span>
<span class="w"> </span>        &lt;security:anonymous /&gt;
<span class="w"> </span>    &lt;/security:http&gt;

<span class="gu">@@ -52,6 +53,7 @@</span>

<span class="w"> </span>    &lt;!-- OAuth2 beans --&gt;
<span class="w"> </span>    &lt;context:annotation-config/&gt;
<span class="gi">+    &lt;bean id=&quot;oidcSecurityConfiguration&quot; class=&quot;it.geosolutions.geostore.services.rest.security.oauth2.openid_connect.OpenIdConnectSecurityConfiguration&quot;/&gt; &lt;!-- add this bean to configure the integration --&gt;</span>

<span class="w"> </span>    &lt;bean id=&quot;googleSecurityConfiguration&quot; class=&quot;it.geosolutions.geostore.services.rest.security.oauth2.google.OAuthGoogleSecurityConfiguration&quot;/&gt;
</code></pre></div>
<h2 id="migration-from-20230202-to-20240100">Migration from 2023.02.02 to 2024.01.00</h2>
<h3 id="toc-plugin-refactor">TOC plugin refactor</h3>
<p>The table of content (TOC) has been refactored with following changes:</p>
<ul>
<li>Removal of hardcoded tools from the toolbar. Now all the toolbar's elements are injected by related plugins. This includes also the introduction of a new plugin called <code>MetadataInfo</code> for layer metadata.</li>
<li>Refactors of TOC components</li>
<li>Review of plugin configuration (cfg). List of changed configuration properties:</li>
<li><code>activateSettingsTool</code> removed property, now the button will be added directly from <code>TOCItemsSettings</code> when available</li>
<li><code>activateQueryTool</code> removed property, now the button will be directly added by <code>FilterLayer</code> plugin, when available</li>
<li><code>activateDownloadTool</code> removed property, now the button will be added directly from <code>LayerDownload</code> when available</li>
<li><code>activateMetedataTool</code> removed property, now the button will be added directly from <code>MetadataInfo</code> when availables</li>
<li><code>checkPlugins</code> remove property, now availability of tools rely on the related plugin so this check is not needed anymore</li>
<li><code>showFullTitleOnExpand</code>  removed property, the new style allows for seeing the full title inline without duplicating it</li>
<li><code>metadataTemplate</code> this configuration has been moved to <code>MetadataInfo</code> plugin</li>
<li><code>metadataOptions</code> this configuration has been moved to <code>MetadataInfo</code> plugin</li>
</ul>
<h3 id="introduction-of-metadatainfo-plugin">Introduction of MetadataInfo plugin</h3>
<p>The <code>MetadataInfo</code> plugin has been introduced to include the layer metadata info button of the TOC toolbar has separated plugin as expected by the new TOC.
Some steps are needed to correctly configure it:</p>
<ul>
<li>Ensure to import the <code>MetadataInfo</code> plugin in the downstream project</li>
<li>Include the plugin definition in the <code>pluginsConfig.json</code> to make it available inside contexts</li>
<li>Move the related configuration (cfg) from the TOC to the <code>MetadataInfo</code> plugin definition in <code>localConfig.json</code> file. This is only necessary if the layer metadata button was configured at the application level</li>
<li>Update your contexts to use <code>MetadataInfo</code> plugin, properly configured, when needed</li>
</ul>
<p>expected changes in the <code>pluginsConfig.json</code> file:</p>
<ul>
<li>add <code>MetadataInfo</code> entry to the list</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;MetadataInfo&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="maven-project-update">Maven project update</h3>
<p>With this release the maven <code>pom.xml</code> files has been restructured to centralize dependencies version in the <code>dependencyManagement</code> section and then in some properties in the root <code>pom.xml</code> file.
This regards also the projects that now hold the versions of the dependencies in the properties section.
Your projects will work in any case, but we suggest to update your <code>pom.xml</code> files to align them to the new structure (see template file in the MapStore2 repository for more details).</p>
<h3 id="database-update">Database update</h3>
<p>The resource metadata has been recently extented to include  information about resource creator and editor and to provide the advertises/unadvertised resource functionalities.
If your installation has the <a href="https://docs.mapstore.geosolutionsgroup.com/en/latest/developer-guide/database-setup/#database-creation-mode">database creation mode</a> set to <code>update</code> (the default), the columns will be added automatically and you do not have to do any action. If it is set to <code>validate</code> instead you will have to run the update scripts.</p>
<p><em>In any case</em>, the update scripts contain also a part to populate the <code>creator</code> column, that can not be applied automatically with  <a href="https://docs.mapstore.geosolutionsgroup.com/en/latest/developer-guide/database-setup/#database-creation-mode">database creation mode</a> set to <code>update</code>.
So if you want to see this information, even if it is not strictily required, you will have to run the migration scripts anyway.</p>
<ul>
<li>
<p>For script reference see:</p>
<p><a href="https://github.com/geosolutions-it/geostore/blob/master/doc/sql/migration/postgresql/postgresql-migration-from-v.2.0.0-to-v2.1.0.sql">postgresql migration script 2.0.0 to 2.1.0</a></p>
<p><a href="https://github.com/geosolutions-it/geostore/blob/master/doc/sql/migration/h2/h2-migration-from-v.2.0.0-to-v2.1.0.sql">h2 migration script 2.0.0 to 2.1.0</a></p>
<p><a href="https://github.com/geosolutions-it/geostore/blob/master/doc/sql/migration/oracle/oracle-migration-from-v.2.0.0-to-v2.1.0.sql">oracle migration script 2.0.0 to 2.1.0</a></p>
</li>
</ul>
<h3 id="restructuring-of-login-and-home-in-dashboard-page">Restructuring of Login and Home in Dashboard page</h3>
<p>We recently added the sidebar to the dashboard page and by doing so we wanted to keep a uniform position of login and home plugins, by putting them in the omnibar container rather than the sidebar one. The viewer is a specific case that will be reviewed in the future.</p>
<p>In order to align the configuration of the two mentioned plugin you have to:</p>
<ul>
<li>edit <code>localConfig.json</code> <code>plugins.dashboard</code> section</li>
<li>remove <code>BurgerMenu</code>, <code>Home</code> and <code>Login</code> items</li>
<li>add the following</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;Details&quot;</span><span class="p">,</span>
<span class="s2">&quot;AddWidgetDashboard&quot;</span><span class="p">,</span>
<span class="s2">&quot;MapConnectionDashboard&quot;</span><span class="p">,</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SidebarMenu&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cfg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;containerPosition&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;columns&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Home&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;override&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;OmniBar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;priority&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Login&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;override&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;OmniBar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;priority&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">},</span>
</code></pre></div>
<h3 id="using-elevation-layer-type-instead-of-wms-layer-with-useforelevation-property">Using <code>elevation</code> layer type instead of wms layer with useForElevation property</h3>
<p>The wms layer with <code>useForElevation</code> property is deprecated and a <code>elevation</code> layer introduced in substitution.
The new <code>elevation</code> layer is used only to display height information inside the mouse position plugin and it will not provide a support for terrain model of the 3D visualziation mode. In order to provide this support, you need to add a <code>terrain</code> layer too. See documentation about <a href="../maps-configuration/#elevation">Elevation layer</a> and <a href="../maps-configuration/#terrain">Terrain layer</a> for more details.
A configuration update example:</p>
<div class="highlight"><pre><span></span><code>{
<span class="w"> </span>   &quot;name&quot;: &quot;Map&quot;,
<span class="w"> </span>   &quot;cfg&quot;: {
<span class="w"> </span>       &quot;additionalLayers&quot;: [
<span class="w"> </span>           {
<span class="gd">-               &quot;type&quot;: &quot;wms&quot;,</span>
<span class="gi">+               &quot;type&quot;: &quot;elevation&quot;,</span>
<span class="w"> </span>               &quot;url&quot;: &quot;/geoserver/wms&quot;,
<span class="w"> </span>               &quot;name&quot;: &quot;workspace:layername&quot;,
<span class="gd">-               &quot;format&quot;: &quot;application/bil16&quot;,</span>
<span class="w"> </span>               &quot;visibility&quot;: true,
<span class="gd">-               &quot;useForElevation&quot;: true,</span>
<span class="w"> </span>               &quot;littleEndian&quot;: false
<span class="w"> </span>           },
<span class="w"> </span>           // only needed for 3D terrain
<span class="gi">+           {</span>
<span class="gi">+               &quot;type&quot;: &quot;terrain&quot;,</span>
<span class="gi">+               &quot;provider&quot;: &quot;wms&quot;,</span>
<span class="gi">+               &quot;url&quot;: &quot;/geoserver/wms&quot;,</span>
<span class="gi">+               &quot;name&quot;: &quot;workspace:layername&quot;,</span>
<span class="gi">+               &quot;littleEndian&quot;: false,</span>
<span class="gi">+               &quot;visibility&quot;: true,</span>
<span class="gi">+               &quot;crs&quot;: &quot;CRS:84&quot;</span>
<span class="w"> </span>           }
<span class="w"> </span>       ]
<span class="w"> </span>   }
}
</code></pre></div>
<h3 id="removing-possibility-to-add-custom-fonts-to-the-map">Removing possibility to add custom fonts to the Map</h3>
<p>From this version we limited the load of the font to FontAwesome.</p>
<p>If you have changed the property <strong>fonts</strong> inside Map plugin it will not longer load the font. A possible fix would be to add the font to the <code>*.html</code> files in your application.</p>
<ul>
<li>make sure that the <code>localConfig.json</code> does not have <strong>fonts</strong> property in  <strong>Map</strong>  plugin</li>
</ul>
<p>The following css is added automatically if needed <code>&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/&gt;</code> inside the <em>head</em> tag.</p>
<h3 id="fixing-background-config">Fixing background config</h3>
<p>From this version in order to fix default 3d background config a change is needed here:</p>
<ul>
<li>update <code>localConfig.json</code> by adding <strong>visibility: false</strong>  to the Empty Background entry in <code>intialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds</code></li>
<li>update <code>new.json</code> by adding <strong>visibility: false</strong>  to the Empty Background entry.</li>
</ul>
<h3 id="adding-spatial-filter-to-dashboard-widgets">Adding spatial filter to dashboard widgets</h3>
<p>In order to enable the possibility to add in and the spatial filter to the widgets ( see <a href="https://github.com/geosolutions-it/MapStore2/issues/9098">#9098</a> ) you have to edit the <code>QueryPanel</code> config in the <code>plugins.dashboard</code> array of the <code>localConfig.json</code> file by adding:</p>
<ul>
<li><strong>useEmbeddedMap</strong>: flag to enable the embedded map</li>
<li><strong>spatialOperations</strong>: The list of spatial operations allowed for this plugin</li>
<li><strong>spatialMethodOptions</strong>: the list of spatial methods to use.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">...</span>
<span class="nt">&quot;dashboard&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="err">...</span>
<span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;QueryPanel&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;cfg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;toolsOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hideCrossLayer&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;useEmbeddedMap&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;spatialPanelExpanded&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;spatialOperations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;INTERSECTS&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;queryform.spatialfilter.operations.intersects&quot;</span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CONTAINS&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;queryform.spatialfilter.operations.contains&quot;</span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WITHIN&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;queryform.spatialfilter.operations.within&quot;</span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;spatialMethodOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BBOX&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;queryform.spatialfilter.methods.box&quot;</span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Circle&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;queryform.spatialfilter.methods.circle&quot;</span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Polygon&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;queryform.spatialfilter.methods.poly&quot;</span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;containerPosition&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;columns&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="mapfish-print-update">MapFish Print update</h3>
<p>The <strong>MapFish Print</strong> library has been updated to work with the latest GeoTools version and Java 11 as well as being aligned with the same dependency used by the official GeoServer printing extension (see this issue <a href="https://github.com/geosolutions-it/mapfish-print/issues/65">https://github.com/geosolutions-it/mapfish-print/issues/65</a>)
For this reason, if you are using the printing plugin in your project you have to update it by following the following steps:</p>
<ul>
<li>Change the version of the mapfish-print dependency in the project <code>pom.xml</code> file:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>               &lt;!-- mapfish-print --&gt;
<span class="w"> </span>               &lt;dependency&gt;
<span class="w"> </span>                   &lt;groupId&gt;org.mapfish.print&lt;/groupId&gt;
<span class="w"> </span>                   &lt;artifactId&gt;print-lib&lt;/artifactId&gt;
<span class="gd">-                    &lt;version&gt;geosolutions-2.3-SNAPSHOT&lt;/version&gt;</span>
<span class="gi">+                    &lt;version&gt;2.4-SNAPSHOT&lt;/version&gt;</span>
</code></pre></div>
<ul>
<li>Add the mvn repository where this library is hosted in the <code>repositories</code> section of the same <code>pom.xml</code> (usually in <code>web</code> folder of a project)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>       &lt;repository&gt;
<span class="w"> </span>           &lt;id&gt;osgeo-snapshot&lt;/id&gt;
<span class="w"> </span>           &lt;name&gt;Open Source Geospatial Foundation Repository&lt;/name&gt;
<span class="w"> </span>           &lt;url&gt;https://repo.osgeo.org/repository/snapshot/&lt;/url&gt;
<span class="w"> </span>           &lt;snapshots&gt;
<span class="w"> </span>               &lt;enabled&gt;true&lt;/enabled&gt;
<span class="w"> </span>           &lt;/snapshots&gt;
<span class="w"> </span>       &lt;/repository&gt;
</code></pre></div>
<h4 id="print-config-file-update">Print config file update</h4>
<p>Due to the introduction of the new <code>Jackson Yaml</code> parser, the MapStore <code>config.yaml</code> file has been reviewed and updated. Below are reported all the relevant changes that need to be applied also to <code>config.yaml</code> of MapStore donwstream projects where the printing engine is present.</p>
<p>Due to the new library being stricter on the format of the Yaml, some changes in the configuration files were made, to make them compliant with yaml format:</p>
<ul>
<li>Removed not allowed characters from property values (<code>@</code> in <code>@shared.privileged.geoserver.pass@</code>)</li>
<li>Removed references without anchors (document declares link to <code>*commonFooter</code> but anchor <code>&amp;commonFooter</code> was not defined previously)</li>
<li>Added a space between key\value pairs (<code>"absoluteX: 30"</code> instead of <code>"absoluteX:30"</code>)</li>
</ul>
<p>Some additional updates has been provided due to parsing issue with the new library:</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!ipMatch</span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span>
<span class="w">    </span><span class="c1"># Allow to all hosts</span>
<span class="w">    </span><span class="nt">mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0</span>
</code></pre></div>
<p><code>!ipMatch</code> is mapped to <a href="https://github.com/mapfish/mapfish-print-v2/blob/0c055e2a36bec3b12eafd207144ff8eb7b37f987/src/main/java/org/mapfish/print/config/AddressHostMatcher.java#L26">AddressHostMatcher</a>, which does not have host property. Should instead use ip property (e.g IP: 127.0.0.1)</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!text</span>
<span class="w">              </span><span class="nt">width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<span class="w">              </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;${comment}&#39;</span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<p><code>!text</code> is mapped to <a href="https://github.com/mapfish/mapfish-print-v2/blob/4b73912e5565ae206af5b5c434ef37454a98c252/src/main/java/org/mapfish/print/config/layout/TextBlock.java#L37">TextBlock class</a>. It does not have width property, so it should be removed.</p>
<div class="highlight"><pre><span></span><code><span class="nt">lastPage</span><span class="p">:</span>
<span class="w">    </span><span class="nt">rotation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<p>lastPage is mapped to <a href="https://github.com/mapfish/mapfish-print-v2/blob/4b73912e5565ae206af5b5c434ef37454a98c252/src/main/java/org/mapfish/print/config/layout/LastPage.java#L30">LastPage class</a>, and does not have rotation property.</p>
<h3 id="annotations-plugin-refactor">Annotations plugin refactor</h3>
<p>The Annotation plugin has been updated to be supported also in 3D maps. This update introduced some changes:</p>
<ul>
<li>All the configurations related to the "Annotations" plugin has been removed from <code>localConfig.json</code> <code>defaultState</code> entry and moved to the <code>cfg</code> property of the plugin</li>
<li>The annotations reducers is not needed anymore inside the default reducers of the app</li>
</ul>
<p>Please update by:</p>
<ul>
<li>Removing <code>annotations</code> entry from your <code>localConfig.json</code> <code>defaultState</code></li>
<li>If you customized the app, you can remove the <code>annotations</code> reducer from default reducers.</li>
<li>If some customizations were applied to the Annotations plugin in <code>defaultState</code>, apply these changes to the plugin configuration, following the documentation of the plugin.</li>
</ul>
<h2 id="migration-from-20230102-to-20230200">Migration from 2023.01.02 to 2023.02.00</h2>
<h3 id="about-plugin-cfg-changes">About plugin cfg changes</h3>
<p>Starting this release <strong>2023.02.00</strong> we have included a new <em>cfg</em> option the About plugin called <strong>githubUrl</strong></p>
<p>We suggest you to edit About plugin cfg of <strong>localConfig.json</strong> adding the following</p>
<div class="highlight"><pre><span></span><code>{
<span class="gd">-    &quot;name&quot;: &quot;About&quot;</span>
<span class="gi">+    &quot;name&quot;: &quot;About&quot;,</span>
<span class="gi">+    &quot;cfg&quot;: {</span>
<span class="gi">+      &quot;githubUrl&quot;: &quot;https://github.com/GITHUB_USER/REPO_NAME/tree/&quot;</span>
<span class="gi">+    }</span>
</code></pre></div>
<p>inside <code>configs/pluginsConfig.json</code> you can add this to the About plugin definition</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span>     &quot;name&quot;: &quot;About&quot;,
<span class="w"> </span>     &quot;glyph&quot;: &quot;info-sign&quot;,
<span class="w"> </span>     &quot;title&quot;: &quot;plugins.About.title&quot;,
<span class="w"> </span>     &quot;description&quot;: &quot;plugins.About.description&quot;,
<span class="w"> </span>     &quot;dependencies&quot;: [
<span class="w"> </span>       &quot;SidebarMenu&quot;
<span class="gd">-      ]</span>
<span class="gi">+      ],</span>
<span class="gi">+      &quot;defaultConfig&quot;: {</span>
<span class="gi">+        &quot;githubUrl&quot;: &quot;https://github.com/GITHUB_USER/REPO_NAME/tree/&quot;</span>
<span class="gi">+      }</span>
<span class="w"> </span>   },
</code></pre></div>
<h3 id="nodejsnpm-upgrade">NodeJS/NPM upgrade</h3>
<p>In this release we updated all our systems to use node 16/NPM 8. This because Node 12 is actually out of maintenance.
We are going to support soon more recent versions of NodeJS solving the related issues.
So make you sure to use the correct version of NodeJS/NPM to build things correctly. See the <a href="../requirements/#debug-build">requirements</a> section of the document for the details.</p>
<h3 id="visualization-mode-in-map-configuration">Visualization mode in map configuration</h3>
<p>The map configuration stores the information related to the visualization mode 2D or 3D after saving a map.
This update include also following changes:</p>
<ul>
<li><code>maptype</code> default state configuration inside the initialState of <code>localConfig.json</code> needs to be removed. If a MapStore project needs a particular setup (eg. use only OpenLayers for 2D maps, initialize the app in 3D, ...) it is possible to override the default map libraries configuration with the new <code>mapType</code> property in the <code>localConfig.json</code> file, see documentation <a href="../local-config/#application-configuration">here</a>.</li>
</ul>
<div class="highlight"><pre><span></span><code>{
<span class="w"> </span>   // ...
<span class="w"> </span>   &quot;initialState&quot;: {
<span class="w"> </span>       &quot;defaultState&quot;: {
<span class="w"> </span>           // ...
<span class="gd">-           &quot;maptype&quot;: {</span>
<span class="gd">-               &quot;mapType&quot;: &quot;{context.mode === &#39;desktop&#39; ? &#39;openlayers&#39; : &#39;leaflet&#39;}&quot;</span>
<span class="gd">-           },</span>
<span class="w"> </span>           // ...
<span class="w"> </span>       }
<span class="w"> </span>   }
<span class="w"> </span>   // ...
}
</code></pre></div>
<ul>
<li>
<p>the <code>changeMapType</code> action has been deprecated in favor of the <code>changeVisualizationMode</code> action</p>
</li>
<li>
<p>the application does not expose the pathname of the viewer with <code>mapType</code> anymore. Example: the old path <code>/viewer/openlayers/1</code> becomes <code>/viewer/1</code></p>
</li>
<li>
<p>the app pages inside a MapStore project must be updated with a new entry, only for projects with custom pages and that are using context applications, here an example:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">MapViewer</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@mapstore/product/pages/MapViewer&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">productAppConfig</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@mapstore/product/appConfig&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">appConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span><span class="nx">productAppConfig</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pages</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="c1">// my custom pages ...,</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;mapviewer&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/viewer/:mapId/context/:contextId&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">MapViewer</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="clean-up-of-old-maven-repositories">Clean up of old maven repositories</h3>
<p>The old spring maven repositories that do not exist anymore have been removed from the <code>pom.xml</code> files. They are not needed anymore, so you can remove them from your <code>pom.xml</code> files too.</p>
<div class="highlight"><pre><span></span><code><span class="gd">-        &lt;!-- Spring --&gt;</span>
<span class="gd">-        &lt;repository&gt;</span>
<span class="gd">-            &lt;id&gt;spring-release&lt;/id&gt;</span>
<span class="gd">-            &lt;name&gt;Spring Portfolio Release Repository&lt;/name&gt;</span>
<span class="gd">-            &lt;url&gt;https://maven.springframework.org/release&lt;/url&gt;</span>
<span class="gd">-            &lt;snapshots&gt;</span>
<span class="gd">-                &lt;enabled&gt;false&lt;/enabled&gt;</span>
<span class="gd">-            &lt;/snapshots&gt;</span>
<span class="gd">-        &lt;/repository&gt;</span>
<span class="gd">-        &lt;repository&gt;</span>
<span class="gd">-            &lt;id&gt;spring-external&lt;/id&gt;</span>
<span class="gd">-            &lt;name&gt;Spring Portfolio External Repository&lt;/name&gt;</span>
<span class="gd">-            &lt;url&gt;https://maven.springframework.org/external&lt;/url&gt;</span>
<span class="gd">-            &lt;snapshots&gt;</span>
<span class="gd">-                &lt;enabled&gt;false&lt;/enabled&gt;</span>
<span class="gd">-            &lt;/snapshots&gt;</span>
<span class="gd">-        &lt;/repository&gt;</span>
</code></pre></div>
<h3 id="new-permalink-plugin">New Permalink plugin</h3>
<p>As part this release, permalink plugin is added to MapStore. The new plugin is already configured in standard MapStore application, but if you are working on a project or if you customized the configuration files, you may need to update them to introduce the new plugin.</p>
<p>In any case on an existing installation you <strong>must</strong> update the database adding the category to make the plugin work.</p>
<h4 id="add-permalink-plugin-to-localconfigjson">Add Permalink plugin to localConfig.json</h4>
<p>In the case you customized your <code>configs/localConfig.json</code> file in your project/installation, to add the permalink plugin you will have to update it as following:</p>
<ul>
<li>Add the "Permalink" plugin to the pages you want to use this plugin. Pages plugins are in the <code>plugins</code> section in the root of <code>localConfig.json</code>,  so you have to add "Permalink" entry to <code>desktop</code>, <code>dashboard</code> and <code>geostory</code> arrays, like this:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;desktop&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">        </span><span class="s2">&quot;Permalink&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;dashboard&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">        </span><span class="s2">&quot;Permalink&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;geostory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">        </span><span class="s2">&quot;Permalink&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>To activate the functionality, you must add a new <code>permalink</code> section to <code>plugins</code> root object of <code>localConfig.json</code>, as shown below</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;permalink&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;Permalink&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;FeedbackMask&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="using-permalink-in-new-contexts">Using Permalink in new contexts</h4>
<p>The plugins available for contexts are listed in the file <code>configs/pluginsConfig.json</code>. In your project/installation, you may need to edit this configuration to make the plugin selectable for your context.
Existing contexts need to be updated separately, after applying these changes</p>
<ul>
<li>Find the "Share" plugin configuration in the <code>plugins</code> array in the root of  <code>pluginsConfig.json</code> configuration file and modify it as shown below (adding <code>children</code> and <code>autoEnableChildren</code> sections:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Share&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;glyph&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;share&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.Share.title&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.Share.description&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;SidebarMenu&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;children&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;Permalink&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;autoEnableChildren&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;Permalink&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<ul>
<li>Add "Permalink" plugin configuration to the <code>plugins</code> array in the root of <code>pluginsConfig.json</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Permalink&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;glyph&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.Permalink.title&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.Permalink.description&quot;</span>
<span class="w">    </span><span class="p">},</span>
</code></pre></div>
<ul>
<li>the app pages inside a MapStore project must be updated with a new entry, only for projects using permalink feature, here an example:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">Permalink</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@mapstore/product/pages/Permalink&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">productAppConfig</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@mapstore/product/appConfig&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">appConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span><span class="nx">productAppConfig</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pages</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="c1">// my custom pages ...,</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;permalink&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/permalink/:pid&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">Permalink</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">};</span>
</code></pre></div>
<h4 id="database-update_1">Database Update</h4>
<p>Add new category <code>PERMALINK</code> to <code>gs_category</code> table. To update your database you need to apply this SQL scripts to your database</p>
<h5 id="postgresql">PostgreSQL</h5>
<div class="highlight"><pre><span></span><code><span class="c1">-- New PERMALINK category</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_category</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="n">nextval</span><span class="p">(</span><span class="s1">&#39;geostore.hibernate_sequence&#39;</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;PERMALINK&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">CONFLICT</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="k">NOTHING</span><span class="p">;</span>
</code></pre></div>
<h5 id="h2">H2</h5>
<div class="highlight"><pre><span></span><code><span class="c1">-- New PERMALINK category</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gs_category</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;PERMALINK&#39;</span><span class="p">);</span>
</code></pre></div>
<h5 id="oracle">Oracle</h5>
<div class="highlight"><pre><span></span><code><span class="c1">-- New PERMALINK category</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gs_category</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="n">hibernate_sequence</span><span class="p">.</span><span class="n">nextval</span><span class="p">,</span><span class="w"> </span><span class="err"></span><span class="n">PERMALINK</span><span class="err">&#39;</span><span class="p">);</span>
</code></pre></div>
<h2 id="migration-from-20220202-to-20230100">Migration from 2022.02.02 to 2023.01.00</h2>
<h3 id="log4j-update-to-log4j2">Log4j update to Log4j2</h3>
<p>With this release Log4j has been updated to Log4j2. The Log4j API has changed with version 2. Basically if you customized logging properties, you have to update the properties file following the <code>log4j properties file migration</code> section.</p>
<p>If you have a downstream project, you will have also to update your dependencies in <code>pom.xml</code> and your Java code, following the suggestions in <code>log4j2 dependencies and code update</code> section.</p>
<p>For more information or more details about how to migrate, follow the <a href="https://logging.apache.org/log4j/2.x/manual/migration.html">official documentation</a>.</p>
<p>!!! note:
    A compatibility tier has been added in order to allow to use old configurations. Anyway it is strongly suggested to update your files as soon as possible.</p>
<h4 id="log4j2-properties-file-migration">log4j2 properties file migration</h4>
<p>To have logging properly work on MapStore then it is needed to:</p>
<ul>
<li>
<p>Rename <code>log4j.properties</code> file to <code>log4j2.properties</code>.</p>
</li>
<li>
<p>Edit the <code>properties</code> to configure it according to the log4j2 syntax. See the <code>Configuration with Properties</code> section on the <a href="https://logging.apache.org/log4j/2.x/manual/configuration.html">official documentation page</a>. Below the old and the new default log4j configuration files are juxtaposed:</p>
</li>
</ul>
<p><code>log4j.properties</code></p>
<div class="highlight"><pre><span></span><code><span class="na">log4j.rootLogger</span><span class="o">=</span><span class="s">INFO, fileAppender</span>

<span class="na">log4j.appender.consoleAppender</span><span class="o">=</span><span class="s">org.apache.log4j.ConsoleAppender</span>
<span class="na">log4j.appender.consoleAppender.layout</span><span class="o">=</span><span class="s">org.apache.log4j.PatternLayout</span>
<span class="na">log4j.appender.consoleAppender.layout.ConversionPattern</span><span class="o">=</span><span class="s">%p %d{yyyy-MM-dd HH:mm:ss.SSS} %c::%M:%L - %m%n</span>

<span class="na">log4j.logger.it.geosolutions.geostore.services.rest</span><span class="o">=</span><span class="s">INFO</span>
<span class="na">log4j.logger.org.hibernate</span><span class="o">=</span><span class="s">INFO</span>
<span class="na">log4j.logger.com.trg</span><span class="o">=</span><span class="s">INFO</span>

<span class="c1"># File appender</span>
<span class="na">log4j.appender.fileAppender</span><span class="o">=</span><span class="s">org.apache.log4j.RollingFileAppender</span>
<span class="na">log4j.appender.fileAppender.layout</span><span class="o">=</span><span class="s">org.apache.log4j.PatternLayout</span>
<span class="na">log4j.appender.fileAppender.layout.ConversionPattern</span><span class="o">=</span><span class="s">%p   %d{yyyy-MM-dd HH:mm:ss.SSS}   %C{1}.%M() - %m %n</span>
<span class="na">log4j.appender.fileAppender.File</span><span class="o">=</span><span class="s">${catalina.base}/logs/mapstore.log</span>
</code></pre></div>
<p><code>log42.properties</code></p>
<div class="highlight"><pre><span></span><code><span class="na">rootLogger.level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
<span class="na">appenders</span><span class="o">=</span><span class="w"> </span><span class="s">console, file</span>


<span class="na">appender.console.type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Console</span>
<span class="na">appender.console.name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">LogToConsole</span>
<span class="na">appender.console.layout.type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">PatternLayout</span>
<span class="na">appender.console.layout.pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%p %d{yyyy-MM-dd HH:mm:ss.SSS} %c::%M:%L - %m%n</span>
<span class="na">rootLogger.appenderRef.stdout.ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">LogToConsole</span>
<span class="na">rootLogger.appenderRef.console.ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">LogToConsole</span>

<span class="na">appender.file.type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">File</span>
<span class="na">appender.file.name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">LogToFile</span>
<span class="na">appender.file.fileName</span><span class="o">=</span><span class="s">${sys:catalina.base}/logs/mapstore.log</span>
<span class="na">appender.file.layout.type</span><span class="o">=</span><span class="s">PatternLayout</span>
<span class="na">appender.file.layout.pattern</span><span class="o">=</span><span class="s">%p   %d{yyyy-MM-dd HH:mm:ss.SSS}   %C{1}.%M() - %m %n</span>
<span class="na">rootLogger.appenderRef.file.ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">LogToFile</span>


<span class="na">logger.restsrv.name</span><span class="o">=</span><span class="s">it.geosolutions.geostore.services.rest</span>
<span class="na">logger.restsrv.level</span><span class="o">=</span><span class="w">  </span><span class="s">INFO</span>
<span class="na">logger.hibernate1.name</span><span class="o">=</span><span class="s">org.hibernate</span>
<span class="na">logger.hibernate1.level</span><span class="o">=</span><span class="s">INFO</span>
<span class="na">logger.trg1.name</span><span class="o">=</span><span class="s">com.trg</span>
<span class="na">logger.trg1.level</span><span class="o">=</span><span class="s">INFO</span>
</code></pre></div>
<p>The main difference applies to how define the Log level on a per package basis. If in previous version of log4j a single property was defining both the package and the level now we need two distinct properties, one to define the name (the package) and the other for the level:</p>
<ul>
<li>before</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="na">log4j.logger.it.geosolutions.geostore.services.rest</span><span class="o">=</span><span class="s">INFO</span>
</code></pre></div>
<ul>
<li>now</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="na">logger.restsrv.name</span><span class="o">=</span><span class="s">it.geosolutions.geostore.services.rest</span>
<span class="na">logger.restsrv.level</span><span class="o">=</span><span class="w">  </span><span class="s">INFO</span>
</code></pre></div>
<p>Note that the second part of the property key in the log4j2 (<code>restsrv</code> in the example) can be whatever string of choice, with the only requirement to be the same for the <code>name</code> and the <code>level</code> property.</p>
<h4 id="log4j2-dependencies-and-code-update">log4j2 dependencies and code update</h4>
<p>In your downstream project you will have to replace, where you used (typically in <code>backend</code> and <code>web</code> folders) the following dependencies:</p>
<div class="highlight"><pre><span></span><code><span class="w">            </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">                </span><span class="nt">&lt;groupId&gt;</span>log4j<span class="nt">&lt;/groupId&gt;</span>
<span class="w">                </span><span class="nt">&lt;artifactId&gt;</span>log4j<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">                </span><span class="nt">&lt;version&gt;</span>${log4j.version}<span class="nt">&lt;/version&gt;</span>
<span class="w">            </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">            </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">                </span><span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
<span class="w">                </span><span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">                </span><span class="nt">&lt;version&gt;</span>${slf4j.version}<span class="nt">&lt;/version&gt;</span>
<span class="w">            </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">            </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">                </span><span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
<span class="w">                </span><span class="nt">&lt;artifactId&gt;</span>jcl-over-slf4j<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">                </span><span class="nt">&lt;version&gt;</span>${slf4j.version}<span class="nt">&lt;/version&gt;</span>
<span class="w">            </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">             </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">                </span><span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
<span class="w">                </span><span class="nt">&lt;artifactId&gt;</span>slf4j-api<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">                </span><span class="nt">&lt;version&gt;</span>${slf4j.version}<span class="nt">&lt;/version&gt;</span>
<span class="w">            </span><span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>with</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.apache.logging.log4j<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>log4j-core<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.19.0<span class="nt">&lt;/version&gt;</span>
<span class="w"> </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w"> </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.apache.logging.log4j<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>log4j-api<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.19.0<span class="nt">&lt;/version&gt;</span>
<span class="w"> </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w"> </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.apache.logging.log4j<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>log4j-slf4j-impl<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.19.0<span class="nt">&lt;/version&gt;</span>
<span class="w"> </span><span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>!!! note:
    of course you can use <code>properties</code> of maven to not repeat the version numbers everytime, or dependency management.</p>
<p>Moreover, if you have some custom code, you will hae to replace  the use of <code>getLogger</code>. Example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">LOGGER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Logger</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">MyClass</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</code></pre></div>
<p>with</p>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">LOGGER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LogManager</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">MyClass</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</code></pre></div>
<p>where <code>LogManager</code> can be imported as:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.logging.log4j.LogManager</span><span class="p">;</span>
</code></pre></div>
<p>and <code>Logger</code> can be imported as:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.logging.log4j.Logger</span><span class="p">;</span>
</code></pre></div>
<h3 id="update-database-schema">Update database schema</h3>
<p>This new version introduced the attributes for user groups. This requires an update to your database applying the scripts available <a href="https://github.com/geosolutions-it/geostore/tree/master/doc/sql/migration">here</a>. You have to apply the script <code>*-migration-from-v.1.5.0-to-v2.0.0</code> of your database. For instance on postgreSQL, you will have to execute the script <code>postgresql/postgresql-migration-from-v.1.5.0-to-v2.0.0</code>.</p>
<p>!!! note:
    The script assumes you set the search path for your db schema. Usually in postgres it is <code>geostore</code>. So make you sure to set the proper search path before to execute the script in postgres. (e.g. <code>SET search_path TO geostore;</code> )</p>
<p>!!! note:
    If you don't want to or you can not execute the migration script, you can set in <code>geostore-datasource-ovr.properities</code> the following property to make MapStore update the database for you</p>
<div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>```properties
geostoreEntityManagerFactory.jpaPropertyMap[hibernate.hbm2ddl.auto]=update
``
</code></pre></div></td></tr></table></div>

<h2 id="migration-from-20220200-to-20220201">Migration from 2022.02.00 to 2022.02.01</h2>
<h3 id="packagejson-scripts-migration">Package.json scripts migration</h3>
<p>With this release we are refactoring a bit the naming of the scripts maintaining retro compatibility avoiding builds on ci/cd systems to break.
Anyway we suggest to align them as listed <a href="https://github.com/geosolutions-it/MapStore2/blob/master/utility/projects/projectScripts.json">here</a></p>
<p>The main changes are:</p>
<ul>
<li>We have removed <code>travis</code> and <code>mvntest</code> scripts.</li>
<li>Most of the scripts are now prefixed with <code>app</code> or <code>fe</code> or <code>be</code> to make them more clear.</li>
<li>Now <code>npm start</code> is an alias of <code>npm run app:start</code> and starts both front-end and back-end.</li>
</ul>
<p>Although it is optional we suggest to align your project to these changes. In order to align your repository you should:</p>
<ul>
<li>update your <code>package.json</code> to latest scripts, you can copy them from <code>utility/projects/projectScripts.json</code> in MapStore2 repository.</li>
<li>update your <code>build.sh</code> to use the latest scripts, instead of the old ones. See <code>project/standard/templates/build.sh</code> in MapStore2 repository.</li>
<li>update in your repository <code>web/pom.xml</code> of your project to receive the backend property from ENV variables.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gu">@@ -14,6 +14,7 @@</span>
<span class="w"> </span>  &lt;properties&gt;
<span class="w"> </span>    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
<span class="w"> </span>    &lt;tomcat.version&gt;8.5.69&lt;/tomcat.version&gt;
<span class="gi">+    &lt;tomcat.port&gt;8080&lt;/tomcat.port&gt;</span>
<span class="w"> </span>  &lt;/properties&gt;

<span class="w"> </span>  &lt;dependencies&gt;
<span class="gu">@@ -400,7 +401,7 @@</span>
<span class="w"> </span>                        ${project.build.directory}/apache-tomcat-${tomcat.version}
<span class="w"> </span>                    &lt;/home&gt;
<span class="w"> </span>                    &lt;properties&gt;
<span class="gd">-                        &lt;cargo.servlet.port&gt;8080&lt;/cargo.servlet.port&gt;</span>
<span class="gi">+                        &lt;cargo.servlet.port&gt;${tomcat.port}&lt;/cargo.servlet.port&gt;</span>
<span class="w"> </span>                        &lt;cargo.logging&gt;low&lt;/cargo.logging&gt;
<span class="w"> </span>                    &lt;/properties&gt;
<span class="w"> </span>                &lt;/configuration&gt;
<span class="gu">@@ -419,6 +420,18 @@</span>
<span class="w"> </span>    &lt;/plugins&gt;
<span class="w"> </span>  &lt;/build&gt;
<span class="w"> </span>    &lt;profiles&gt;
<span class="gi">+        &lt;profile&gt;</span>
<span class="gi">+            &lt;id&gt;dev-custom-port&lt;/id&gt;</span>
<span class="gi">+            &lt;activation&gt;</span>
<span class="gi">+                &lt;property&gt;</span>
<span class="gi">+                    &lt;name&gt;env.MAPSTORE_BACKEND_PORT&lt;/name&gt;</span>
<span class="gi">+                &lt;/property&gt;</span>
<span class="gi">+            &lt;/activation&gt;</span>
<span class="gi">+            &lt;properties&gt;</span>
<span class="gi">+                &lt;!-- Override only if necessary --&gt;</span>
<span class="gi">+                &lt;tomcat.port&gt;${env.MAPSTORE_BACKEND_PORT}&lt;/tomcat.port&gt;</span>
<span class="gi">+            &lt;/properties&gt;</span>
<span class="gi">+        &lt;/profile&gt;</span>
<span class="w"> </span>        &lt;profile&gt;
<span class="w"> </span>            &lt;id&gt;printing&lt;/id&gt;
<span class="w"> </span>            &lt;activation&gt;
</code></pre></div>
<h2 id="migration-from-20220102-to-20220200">Migration from 2022.01.02 to 2022.02.00</h2>
<h3 id="html-pages-optimization">HTML pages optimization</h3>
<p>We removed script and css link to leaflet CDN in favor of a dynamic import of the libraries in the main bundle, now leaflet is only loaded when the library is selected as map type of the viewer. You can update the project HTML files by removing these tags:</p>
<div class="highlight"><pre><span></span><code><span class="gd">- &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css&quot; /&gt;</span>
<span class="gd">- &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css&quot; /&gt;</span>
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&quot; /&gt;
&lt;link rel=&quot;shortcut icon&quot; type=&quot;image/png&quot; href=&quot;https://cdn.jslibs.mapstore2.geo-solutions.it/leaflet/favicon.ico&quot; /&gt;
&lt;!--script src=&quot;https://maps.google.com/maps/api/js?v=3&quot;&gt;&lt;/script--&gt;
<span class="gd">- &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js&quot;&gt;&lt;/script&gt;</span>
<span class="gd">- &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js&quot;&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>We also made asynchronous the script to detect valid browser. This should slightly improve the initial requests time.
 You can updated the script in your project as following:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">async</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://unpkg.com/bowser@2.7.0/es5.js&quot;</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;checkBrowser()&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">checkBrowser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">browserInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bowser</span><span class="p">.</span><span class="nx">getParser</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">);</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">isValidBrowser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">browserInfo</span><span class="p">.</span><span class="nx">satisfies</span><span class="p">({</span>
<span class="w">            </span><span class="s2">&quot;edge&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&gt;1&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;chrome&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&gt;1&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;safari&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&gt;1&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;firefox&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&gt;1&quot;</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">isValidBrowser</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;unsupportedBrowser.html&quot;</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;container&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<h3 id="update-pluginsjs-to-make-upstream-plugins-use-dynamic-import">Update plugins.js to make upstream plugins use dynamic import</h3>
<p>We've updated <code>plugins.js</code> in MapStore to make most of the plugins use dynamic import. <code>plugins.js</code> of your project have to be updated separately.</p>
<p>Please use <code>web\client\product\plugins.js</code> file as a reference listing plugins whose definition can be changed to support dynamic import.</p>
<p>To use dynamic import for plugin, please update its definition to look like:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="nx">AnnotationsPlugin</span><span class="o">:</span><span class="w"> </span><span class="nx">toModulePlugin</span><span class="p">(</span><span class="s1">&#39;Annotations&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">import</span><span class="p">(</span><span class="cm">/* webpackChunkName: &#39;plugins/annotations&#39; */</span><span class="w"> </span><span class="s1">&#39;../plugins/Annotations&#39;</span><span class="p">)),</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>See <a href="../extensions/#dynamic-import-of-extension">Dynamic import of extension</a> to have more details about transforming extensions to use dynamic import.</p>
<h3 id="version-plugin-has-been-removed">Version plugin has been removed</h3>
<p>We no longer maintain the Version plugin since we have moved its content inside the About plugin (see <a href="https://github.com/geosolutions-it/MapStore2/issues/7934#issuecomment-1201433942">here</a> for more details)</p>
<p>We suggest you to clean up your project as well:</p>
<ul>
<li>remove Version entry it from a local list of plugins.js</li>
<li>remove Version entries it from a localConfig.json and pluginConfig.json</li>
<li>
<p>add About entry into other pages of mapstore plugins array:</p>
</li>
<li>
<p>dashboard</p>
</li>
<li>geostory</li>
<li>mobile</li>
<li>remove <code>DefinePlugin</code> entries dedicated to git revision retrieved by <code>git-revision-webpack-plugin</code>, if any, from <code>webpack-config.js</code> or <code>prod.webpack-config.js</code>, because they have been moved to the file <code>build/BuildUtils.js</code></li>
<li>check that in your package.json you have this extends rule</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;eslintConfig&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;extends&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;@mapstore/eslint-config-mapstore&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">...</span>
</code></pre></div>
<ul>
<li>edit the version of the <em>@mapstore/eslint-config-mapstore</em> to <strong>1.0.5</strong> in your package.json so that the new globals config will be inherited</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>this may fail on gha workflows, in that case we suggest to edit directly your package.json with globals taken from mapstore framework</p>
</div>
<h3 id="support-for-openid">Support for OpenID</h3>
<p>MapStore introduced support for OpenID for google and keycloak. In order to have this functionalities and to be aligned with the latest version of MapStore you have to update the following files in your projects:</p>
<ul>
<li><code>geostore-spring-security.xml</code> (your custom spring security context) have to be updated adding the beans and the <code>security:custom-filter</code> entry in the <code>&lt;security:http&gt;</code> entry, as here below:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>       &lt;security:csrf disabled=&quot;true&quot;/&gt;
<span class="w"> </span>       &lt;security:custom-filter ref=&quot;authenticationTokenProcessingFilter&quot; before=&quot;FORM_LOGIN_FILTER&quot;/&gt;
<span class="w"> </span>       &lt;security:custom-filter ref=&quot;sessionTokenProcessingFilter&quot; after=&quot;FORM_LOGIN_FILTER&quot;/&gt;
<span class="gi">+        &lt;security:custom-filter ref=&quot;keycloakFilter&quot; before=&quot;BASIC_AUTH_FILTER&quot;/&gt;</span>
<span class="gi">+        &lt;security:custom-filter ref=&quot;googleOpenIdFilter&quot; after=&quot;BASIC_AUTH_FILTER&quot;/&gt;</span>
<span class="w"> </span>       &lt;security:anonymous /&gt;
<span class="w"> </span>   &lt;/security:http&gt;

<span class="w"> </span>   &lt;security:authentication-manager&gt;
<span class="w"> </span>       &lt;security:authentication-provider ref=&#39;geoStoreUserServiceAuthenticationProvider&#39; /&gt;
<span class="w"> </span>   &lt;/security:authentication-manager&gt;
<span class="gi">+</span>
<span class="gi">+</span>
<span class="gi">+    &lt;bean id=&quot;preauthenticatedAuthenticationProvider&quot; class=&quot;it.geosolutions.geostore.services.rest.security.PreAuthenticatedAuthenticationProvider&quot;&gt;</span>
<span class="gi">+    &lt;/bean&gt;</span>
<span class="gi">+</span>
<span class="gi">+    &lt;!-- OAuth2 beans --&gt;</span>
<span class="gi">+    &lt;context:annotation-config/&gt;</span>
<span class="gi">+</span>
<span class="gi">+    &lt;bean id=&quot;googleSecurityConfiguration&quot; class=&quot;it.geosolutions.geostore.services.rest.security.oauth2.google.OAuthGoogleSecurityConfiguration&quot;/&gt;</span>
<span class="gi">+</span>
<span class="gi">+    &lt;!-- Keycloak --&gt;</span>
<span class="gi">+</span>
<span class="gi">+   &lt;bean id=&quot;keycloakConfig&quot; class=&quot;it.geosolutions.geostore.services.rest.security.keycloak.KeyCloakSecurityConfiguration&quot;/&gt;</span>
<span class="gi">+</span>
<span class="gi">+    &lt;!-- END OAuth2 beans--&gt;</span>
<span class="gi">+</span>
<span class="gi">+    &lt;!--  security integration inclusions  --&gt;</span>
<span class="gi">+    &lt;import resource=&quot;classpath*:security-integration-${security.integration:default}.xml&quot;/&gt;</span>

&lt;/beans&gt;
</code></pre></div>
<ul>
<li><code>web.xml</code>: add the following content to the file:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gu">@@ -34,6 +34,17 @@</span>
<span class="w"> </span>       &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
<span class="w"> </span>   &lt;/listener&gt;

<span class="gi">+    &lt;!-- Allow to use RequestContextHolder --&gt;</span>
<span class="gi">+    &lt;filter&gt;</span>
<span class="gi">+        &lt;filter-name&gt;springRequestContextFilter&lt;/filter-name&gt;</span>
<span class="gi">+        &lt;filter-class&gt;org.springframework.web.filter.RequestContextFilter&lt;/filter-class&gt;</span>
<span class="gi">+    &lt;/filter&gt;</span>
<span class="gi">+    &lt;filter-mapping&gt;</span>
<span class="gi">+        &lt;filter-name&gt;springRequestContextFilter&lt;/filter-name&gt;</span>
<span class="gi">+        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span>
<span class="gi">+    &lt;/filter-mapping&gt;</span>
<span class="gi">+</span>
<span class="gi">+</span>
<span class="w"> </span>   &lt;!-- Spring Security Servlet --&gt;
<span class="w"> </span>   &lt;filter&gt;
</code></pre></div>
<ul>
<li><code>applicationContext.xml</code> for consistency, we added <code>mapstore-ovr.properties</code> files to be searched in class-path and in the data-dir, as for the other properties files:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gu">@@ -49,6 +49,7 @@</span>
<span class="w"> </span>        &lt;property name=&quot;order&quot; value=&quot;10&quot;/&gt;
<span class="w"> </span>        &lt;property name=&quot;locations&quot;&gt;
<span class="w"> </span>            &lt;list&gt;
<span class="gi">+                 &lt;value&gt;classpath:mapstore-ovr.properties&lt;/value&gt;</span>
<span class="w"> </span>                &lt;value&gt;file:${datadir.location:}/geostore-datasource-ovr.properties&lt;/value&gt;
<span class="w"> </span>                &lt;value&gt;file:${datadir.location:}/mapstore-ovr.properties&lt;/value&gt;
<span class="w"> </span>            &lt;/list&gt;
</code></pre></div>
<h3 id="upgrading-the-printing-engine">Upgrading the printing engine</h3>
<p>The mapfish-print based printing engine has been upgraded to align to the latest official 2.1.5 in term of functionalities.</p>
<p>An update to the MapStore printing engine context file (<code>applicationContext-print.xml</code>) is needed for all projects built with the printing profile enabled. The following sections should be added to the file:</p>
<div class="highlight"><pre><span></span><code>&lt;bean id=&quot;configFactory&quot; class=&quot;org.mapfish.print.config.ConfigFactory&quot;&gt;&lt;/bean&gt;
<span class="gi">+&lt;bean id=&quot;threadResources&quot; class=&quot;org.mapfish.print.ThreadResources&quot;&gt;</span>
<span class="gi">+    &lt;property name=&quot;connectionTimeout&quot; value=&quot;30000&quot;/&gt;</span>
<span class="gi">+    &lt;property name=&quot;socketTimeout&quot; value=&quot;30000&quot; /&gt;</span>
<span class="gi">+    &lt;property name=&quot;globalParallelFetches&quot; value=&quot;200&quot;/&gt;</span>
<span class="gi">+    &lt;property name=&quot;perHostParallelFetches&quot; value=&quot;30&quot; /&gt;</span>
<span class="gi">+&lt;/bean&gt;</span>

&lt;bean id=&quot;pdfOutputFactory&quot; class=&quot;org.mapfish.print.output.PdfOutputFactory&quot;/&gt;
<span class="gi">+</span>
<span class="gi">+&lt;bean id=&quot;metricRegistry&quot; class=&quot;com.codahale.metrics.MetricRegistry&quot; lazy-init=&quot;false&quot;/&gt;</span>
<span class="gi">+&lt;bean id=&quot;healthCheckRegistry&quot; class=&quot;com.codahale.metrics.health.HealthCheckRegistry&quot; lazy-init=&quot;false&quot;/&gt;</span>
<span class="gi">+&lt;bean id=&quot;loggingMetricsConfigurator&quot; class=&quot;org.mapfish.print.metrics.LoggingMetricsConfigurator&quot;  lazy-init=&quot;false&quot;/&gt;</span>
<span class="gi">+&lt;bean id=&quot;jvmMetricsConfigurator&quot; class=&quot;org.mapfish.print.metrics.JvmMetricsConfigurator&quot; lazy-init=&quot;false&quot;/&gt;</span>
<span class="gi">+&lt;bean id=&quot;jmlMetricsReporter&quot; class=&quot;org.mapfish.print.metrics.JmxMetricsReporter&quot; lazy-init=&quot;false&quot;/&gt;</span>
</code></pre></div>
<p>Also, remember to update your project pom.xml with the updated dependency:</p>
<ul>
<li>locate the print-lib dependency in the pom.xml file</li>
<li>replace the dependency with the following snippet</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.mapfish.print<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>print-lib<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>geosolutions-2.1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;exclusions&gt;</span>
<span class="w">        </span><span class="nt">&lt;exclusion&gt;</span>
<span class="w">            </span><span class="nt">&lt;groupId&gt;</span>commons-codec<span class="nt">&lt;/groupId&gt;</span>
<span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>commons-codec<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;/exclusion&gt;</span>
<span class="w">        </span><span class="nt">&lt;exclusion&gt;</span>
<span class="w">            </span><span class="nt">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class="nt">&lt;/groupId&gt;</span>
<span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>jackson-annotations<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;/exclusion&gt;</span>
<span class="w">        </span><span class="nt">&lt;exclusion&gt;</span>
<span class="w">            </span><span class="nt">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class="nt">&lt;/groupId&gt;</span>
<span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>jackson-core<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;/exclusion&gt;</span>
<span class="w">        </span><span class="nt">&lt;exclusion&gt;</span>
<span class="w">            </span><span class="nt">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class="nt">&lt;/groupId&gt;</span>
<span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>jackson-databind<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;/exclusion&gt;</span>
<span class="w">        </span><span class="nt">&lt;exclusion&gt;</span>
<span class="w">            </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
<span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>spring-web<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;/exclusion&gt;</span>
<span class="w">        </span><span class="nt">&lt;exclusion&gt;</span>
<span class="w">            </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
<span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;/exclusion&gt;</span>
<span class="w">    </span><span class="nt">&lt;/exclusions&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>Finally, to enable printing in different formats than PDF, you should add the following to your <code>config.yml</code> file (at the top level):</p>
<div class="highlight"><pre><span></span><code>formats:
  - &#39;*&#39;
</code></pre></div>
<h3 id="replacing-burgermenu-with-sidebarmenu">Replacing BurgerMenu with SidebarMenu</h3>
<p>There were several changes applied to the application layout, one of them is the Sidebar Menu that comes to replace Burger menu on map viewer and in contexts.
Following actions need to be applied to make a switch:</p>
<ul>
<li>Update localConfig.json and add "SidebarMenu" entry to the "desktop" section:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;desktop&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">        </span><span class="s2">&quot;SidebarMenu&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Remove "BurgerMenu" entry from "desktop" section.</li>
</ul>
<h4 id="using-sidebar-menu-in-new-contexts">Using Sidebar Menu in new contexts</h4>
<p>Contents of your <code>pluginsConfig.json</code> need to be reviewed to allow usage of new "SidebarMenu" in new contexts.
Existing contexts need to be updated separately, please refer to the next chapter for instructions.</p>
<ul>
<li>Find "BurgerMenu" plugin configuration in <code>pluginsConfig.json</code> and remove <code>"hidden": true</code> line from it:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BurgerMenu&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;glyph&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;menu-hamburger&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.BurgerMenu.title&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.BurgerMenu.description&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;OmniBar&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Add <code>SidebarMenu</code> entry to the "plugins" array:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SidebarMenu&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;hidden&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Go through all plugins definitions and replace <code>BurgerMenu</code> dependency with <code>SidebarMenu</code>, e.g.:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MapExport&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;glyph&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;download&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.MapExport.title&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.MapExport.description&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;SidebarMenu&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<ul>
<li>Also the <code>StreetView</code> plugin needs to depend from <code>SidebarMenu</code>.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StreetView&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;glyph&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;road&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.StreetView.title&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plugins.StreetView.description&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;SidebarMenu&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="updating-existing-contexts-to-use-sidebar-menu">Updating existing contexts to use Sidebar Menu</h4>
<p>Contexts created in previous versions of MapStore will maintain old Burger Menu. There are two options allowing to replace it with the new Sidebar Menu:</p>
<ul>
<li>Using manual update.</li>
<li>Using SQL query to update all contexts at once.</li>
</ul>
<p>Before going with one of the approaches, please make sure that changes to <code>pluginsConfig.json</code> from previous chapter are applied.</p>
<p><strong>To update context manually:</strong></p>
<ol>
<li>Go to the context manager (#/context-manager) and edit context you want to update.</li>
<li>Move to the step 3: Configure Plugins.</li>
<li>Find "Burger Menu" on the right side (enabled plugins) and move it to the left column.</li>
<li>Save context</li>
</ol>
<p><strong>Note:</strong> "Burger Menu" has higher priority over the "Sidebar Menu", so it will always be used if it's added to the list of enabled plugins of the context.</p>
<p><strong>To update all contexts at once:</strong></p>
<p>This is a sample SQL query that can be executed against the MapStore DB to replace the Burger Menu with the new Sidebar for existing application contexts previously created:</p>
<div class="highlight"><pre><span></span><code><span class="k">UPDATE</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_stored_data</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">stored_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regexp_replace</span><span class="p">(</span><span class="n">gs_stored_data</span><span class="p">.</span><span class="n">stored_data</span><span class="p">,</span><span class="s1">&#39;{&quot;name&quot;:&quot;BurgerMenu&quot;},&#39;</span><span class="p">,</span><span class="s1">&#39;{&quot;name&quot;:&quot;SidebarMenu&quot;},&#39;</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_resource</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">gs_stored_data</span><span class="p">.</span><span class="n">resource_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gs_resource</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AND</span>
<span class="w">        </span><span class="n">gs_resource</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_category</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;CONTEXT&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">AND</span>
<span class="w">        </span><span class="n">gs_stored_data</span><span class="p">.</span><span class="n">stored_data</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s1">&#39;.*{&quot;name&quot;:&quot;BurgerMenu&quot;},.*&#39;</span><span class="p">;</span>
</code></pre></div>
<p><strong>Note:</strong> Schema name could vary depending on your installation configuration.</p>
<h3 id="updating-extensions">Updating extensions</h3>
<p>Please refer to the <a href="../extensions/#managing-drawing-interactions-conflict-in-extension">extensions</a> documentation to know how to update your extensions.</p>
<h3 id="using-terrain-layer-type-to-define-3d-map-elevation-profile">Using <code>terrain</code> layer type to define 3D map elevation profile</h3>
<p>A new <code>terrain</code> layer type has been created in order to provide more options and versatility when defining an elevation profile for the 3D map terrain.
This <code>terrain</code> layer will substitute the former <code>wms</code> layer (with <code>useForElevation</code> attribute) used to define the elevation profile.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>wms</code> layer (with <code>useForElevation</code> attribute) configuration is still needed to show the elevation data inside the MousePosition plugin and it will display the terrain at the same time. The <code>terrain</code> layer type allows a more versatile way of handling elevation but it will work only as terrain visualization in the 3D map viewer.</p>
</div>
<p>The <code>additionalLayers</code> object on the <code>localConfig.json</code> file should adhere now to the <a href="../maps-configuration/#terrain">terrain layer configuration</a>.
Serve the following code as an example:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Map&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;cfg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;additionalLayers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;terrain&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;wms&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://host-sample/geoserver/wms&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;workspace:layername&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// name of the geoserver resource</span>
<span class="w">            </span><span class="nt">&quot;littleendian&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;visibility&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code>terrain</code> layer with <code>wms</code> provider, the format option in layer configuration is not needed anymore as Mapstore supports only <code>image/bil</code> format and is used by default</p>
</div>
<h2 id="migration-from-20220100-to-20220101">Migration from 2022.01.00 to 2022.01.01</h2>
<h3 id="mailinglists-plugin-has-been-removed">MailingLists plugin has been removed</h3>
<p><code>MailingLists</code> plugin has ben removed from the core of MapStore. This means you can remove it from your <code>localConfig.json</code> (if present, it will be anyway ignored by the plugin system).</p>
<h2 id="migration-from-20210202-to-20220100">Migration from 2021.02.02 to 2022.01.00</h2>
<p>This release includes several libraries upgrade on the backend side,
in particular the following have been migrated to the latest available versions:</p>
<table>
<thead>
<tr>
<th>Library</th>
<th>Old</th>
<th>New</th>
</tr>
</thead>
<tbody>
<tr>
<td>Spring</td>
<td>3.0.5</td>
<td>5.3.9</td>
</tr>
<tr>
<td>Spring-security</td>
<td>3.0.5</td>
<td>5.3.10</td>
</tr>
<tr>
<td>CXF</td>
<td>2.3.2</td>
<td>3.4.4</td>
</tr>
<tr>
<td>Hibernate</td>
<td>3.3.2</td>
<td>5.5.0</td>
</tr>
<tr>
<td>JPA</td>
<td>1.0</td>
<td>2.1</td>
</tr>
<tr>
<td>hibernate-generic-dao</td>
<td>0.5.1</td>
<td>1.3.0-SNAPSHOT</td>
</tr>
<tr>
<td>h2</td>
<td>1.3.168</td>
<td>1.3.175</td>
</tr>
<tr>
<td>javax-servlet-api</td>
<td>2.5</td>
<td>3.1.0</td>
</tr>
</tbody>
</table>
<p>This requires also the <strong>upgrade of Tomcat to at least version 8.5.x</strong>.</p>
<h3 id="updating-projects-configuration">Updating projects configuration</h3>
<p>Projects need the following to update to this MapStore release:</p>
<ul>
<li>update dependencies (in <code>web/pom.xml</code>) copying those in <code>MapStore2/java/web/pom.xml</code>, in particular (where present):</li>
</ul>
<table>
<thead>
<tr>
<th>Dependency</th>
<th>Version</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>mapstore-services</td>
<td>1.3.0</td>
<td>Replaces mapstore-backend</td>
</tr>
<tr>
<td>geostore-webapp</td>
<td>1.8.0</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>update packagingExcludes in <code>web/pom.xml</code> to this list:</li>
</ul>
<div class="highlight"><pre><span></span><code>WEB-INF/lib/commons-codec-1.2.jar,
WEB-INF/lib/commons-io-1.1.jar,
WEB-INF/lib/commons-logging-1.0.4.jar,
WEB-INF/lib/commons-pool-1.3.jar,
WEB-INF/lib/slf4j-api-1.5*.jar,
WEB-INF/lib/slf4j-log4j12-1.5*.jar,
WEB-INF/lib/spring-tx-5.2.15*.jar
</code></pre></div>
<ul>
<li>upgrade <strong>Tomcat to 8.5</strong> or greater</li>
<li>update your <code>geostore-spring-security.xml</code> file to add the following setting, needed to disable CSRF validation, that MapStore services do not implement yet:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;security:http</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">    </span>...
<span class="w">    </span><span class="nt">&lt;security:csrf</span><span class="w"> </span><span class="na">disabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span>...
<span class="nt">&lt;/security:http&gt;</span>
</code></pre></div>
<ul>
<li>remove the spring log4j listener from <code>web.xml</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="cm">&lt;!-- spring context loader</span>
<span class="cm">    &lt;listener&gt;</span>
<span class="cm">        &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt;</span>
<span class="cm">    &lt;/listener&gt;--&gt;</span>
</code></pre></div>
<ul>
<li>If one of the libraries updated is used in your project, you should align the version with the newer one to avoid jar duplications</li>
<li>Some old project may define versions of spring and/or jackson in maven properties. You can remove these definition and the dependency from main <code>pom.xml</code> since they should be inherited from spring.
In particular you may need to remove these properties :</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gd">-        &lt;jackson.version&gt;1.9.10&lt;/jackson.version&gt;</span>
<span class="gd">-        &lt;jackson.databind-version&gt;2.2.3&lt;/jackson.databind-version&gt;</span>
<span class="gd">-        &lt;jackson.annotations-version&gt;2.5.3&lt;/jackson.annotations-version&gt;</span>
</code></pre></div>
<h3 id="upgrading-cesiumjs">Upgrading CesiumJS</h3>
<p>CesiumJS has been upgraded to version 1.90 (from 1.17) and included directly in the mapstore bundle as async import.</p>
<p>Downstream project should update following configurations:</p>
<ul>
<li>remove all executions related to the cesium library from the pom.xml</li>
</ul>
<div class="highlight"><pre><span></span><code>&lt;execution&gt;
<span class="w"> </span>   &lt;id&gt;html, configuration files and images&lt;/id&gt;
<span class="w"> </span>   &lt;phase&gt;process-classes&lt;/phase&gt;
<span class="w"> </span>   &lt;goals&gt;
<span class="w"> </span>       &lt;goal&gt;copy-resources&lt;/goal&gt;
<span class="w"> </span>   &lt;/goals&gt;
<span class="w"> </span>   &lt;configuration&gt;
<span class="w"> </span>       &lt;outputDirectory&gt;${basedir}/target/mapstore&lt;/outputDirectory&gt;
<span class="w"> </span>       &lt;encoding&gt;UTF-8&lt;/encoding&gt;
<span class="w"> </span>       &lt;resources&gt;
<span class="w"> </span>           &lt;resource&gt;
<span class="w"> </span>               &lt;directory&gt;${basedir}/../web/client&lt;/directory&gt;
<span class="w"> </span>               &lt;includes&gt;
<span class="w"> </span>                   &lt;include&gt;**/*.html&lt;/include&gt;
<span class="w"> </span>                   &lt;include&gt;**/*.json&lt;/include&gt;
<span class="w"> </span>                   &lt;include&gt;**/img/*&lt;/include&gt;
<span class="w"> </span>                   &lt;include&gt;product/assets/symbols/*&lt;/include&gt;
<span class="w"> </span>                   &lt;include&gt;**/*.less&lt;/include&gt;
<span class="w"> </span>               &lt;/includes&gt;
<span class="w"> </span>               &lt;excludes&gt;
<span class="w"> </span>                   &lt;exclude&gt;node_modules/*&lt;/exclude&gt;
<span class="w"> </span>                   &lt;exclude&gt;node_modules/**/*&lt;/exclude&gt;
<span class="gd">-                    &lt;exclude&gt;**/libs/Cesium/**/*&lt;/exclude&gt;</span>
<span class="w"> </span>                   &lt;exclude&gt;**/test-resources/*&lt;/exclude&gt;
<span class="w"> </span>               &lt;/excludes&gt;
<span class="w"> </span>           &lt;/resource&gt;
<span class="w"> </span>       &lt;/resources&gt;
<span class="w"> </span>   &lt;/configuration&gt;
&lt;/execution&gt;
<span class="gd">-&lt;execution&gt;</span>
<span class="gd">-    &lt;id&gt;CesiumJS-navigation&lt;/id&gt;</span>
<span class="gd">-    &lt;phase&gt;process-classes&lt;/phase&gt;</span>
<span class="gd">-    &lt;goals&gt;</span>
<span class="gd">-        &lt;goal&gt;copy-resources&lt;/goal&gt;</span>
<span class="gd">-    &lt;/goals&gt;</span>
<span class="gd">-    &lt;configuration&gt;</span>
<span class="gd">-        &lt;outputDirectory&gt;${basedir}/target/mapstore/libs/cesium-navigation&lt;/outputDirectory&gt;</span>
<span class="gd">-        &lt;encoding&gt;UTF-8&lt;/encoding&gt;</span>
<span class="gd">-        &lt;resources&gt;</span>
<span class="gd">-            &lt;resource&gt;</span>
<span class="gd">-                &lt;directory&gt;${basedir}/../web/client/libs/cesium-navigation&lt;/directory&gt;</span>
<span class="gd">-            &lt;/resource&gt;</span>
<span class="gd">-        &lt;/resources&gt;</span>
<span class="gd">-    &lt;/configuration&gt;</span>
<span class="gd">-&lt;/execution&gt;</span>
</code></pre></div>
<ul>
<li>remove all the external script and css related to cesium and cesium-navigation now included as packages</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gd">-&lt;script src=&quot;https://cesium.com/downloads/cesiumjs/releases/1.42/Build/Cesium/Cesium.js&quot;&gt;&lt;/script&gt;</span>
<span class="gd">-&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cesium.com/downloads/cesiumjs/releases/1.42/Build/Cesium/Widgets/widgets.css&quot; /&gt;</span>
<span class="gd">-&lt;script src=&quot;libs/cesium-navigation/cesium-navigation.js&quot;&gt;&lt;/script&gt;</span>
<span class="gd">-&lt;link rel=&quot;stylesheet&quot; href=&quot;libs/cesium-navigation/cesium-navigation.css&quot; /&gt;</span>
</code></pre></div>
<ul>
<li>This step is needed only for custom project with a specific <code>publicPath</code> different from the default one. In this case you may need to specify what folder deliver the  cesium build ( by default <code>dist/cesium</code>). To do that, you can add the  <code>cesiumBaseUrl</code> parameter in the webpack dev and prod configs to the correct location of the cesium static assets, widgets and workers folder.</li>
</ul>
<h2 id="migration-from-20210201-to-20210202">Migration from 2021.02.01 to 2021.02.02</h2>
<h3 id="style-parsers-dynamic-import">Style parsers dynamic import</h3>
<p>The style parser libraries introduced a dynamic import to reduce the initial bundle size. This change reflects to the <code>getStyleParser</code> function provided by the VectorStyleUtils module. If a downstream project of MapStore is using <code>getStyleParser</code> it should update it to this new version:</p>
<div class="highlight"><pre><span></span><code>// example

<span class="gd">- // old use of parser</span>
<span class="gd">- const parser = getStyleParser(&#39;sld&#39;);</span>

<span class="gi">+ // new use of parser</span>
<span class="gi">+ getStyleParser(&#39;sld&#39;)</span>
<span class="gi">+     .then((parser) =&gt; {</span>
<span class="gi">+         // use parser</span>
<span class="gi">+     });</span>
</code></pre></div>
<h2 id="migration-from-20210200-to-20210201">Migration from 2021.02.00 to 2021.02.01</h2>
<p>This update contains a fix for a minor vulnerability found in <code>log4j</code> library.
For this reason you may need to update the dependencies of your project</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This vulnerability <strong>is not</strong> <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-44228">CVE-2021-44228</a>
but only a couple of smaller ones, that involve <code>Log4J</code> ( <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-44228">CVE-2021-44228</a> is for <code>Log4J2</code> ).
Anyway MapStore is not prone to these vulnerabilities with the default configuration.
For more information, see the dedicated <a href="https://www.geosolutionsgroup.com/blog/geosolutions-lo4shell/">blog post</a></p>
</div>
<p>here the instructions:</p>
<h3 id="align-pomxml-files">Align <code>pom.xml</code> files</h3>
<p>Here the changes in <code>pom.xml</code> and <code>web/pom.xml</code> to update:</p>
<ul>
<li>Change <code>mapstore-backend</code> into <code>mapstore-services</code> and set the version to <code>1.2.2</code></li>
</ul>
<div class="highlight"><pre><span></span><code>&lt;!-- MapStore backend --&gt;
<span class="w"> </span>   &lt;dependency&gt;
<span class="w"> </span>   &lt;groupId&gt;it.geosolutions.mapstore&lt;/groupId&gt;
<span class="gd">-      &lt;artifactId&gt;mapstore-backend&lt;/artifactId&gt;</span>
<span class="gd">-      &lt;version&gt;1.2.1&lt;/version&gt;</span>
<span class="gi">+      &lt;artifactId&gt;mapstore-services&lt;/artifactId&gt;</span>
<span class="gi">+      &lt;version&gt;1.2.2&lt;/version&gt;</span>
<span class="w"> </span>   &lt;/dependency&gt;
</code></pre></div>
<ul>
<li>Set <code>geostore-webapp</code> version to <code>1.7.1</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>   &lt;dependency&gt;
<span class="w"> </span>   &lt;groupId&gt;it.geosolutions.geostore&lt;/groupId&gt;
<span class="w"> </span>   &lt;artifactId&gt;geostore-webapp&lt;/artifactId&gt;
<span class="gd">-      &lt;version&gt;1.7.0&lt;/version&gt;</span>
<span class="gi">+      &lt;version&gt;1.7.1&lt;/version&gt;</span>
<span class="w"> </span>   &lt;type&gt;war&lt;/type&gt;
<span class="w"> </span>   &lt;scope&gt;runtime&lt;/scope&gt;
<span class="w"> </span>   &lt;/dependency&gt;
</code></pre></div>
<ul>
<li>Set <code>http_proxy</code> version to <code>1.1.1</code> (should already be there)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>   &lt;dependency&gt;
<span class="w"> </span>   &lt;!-- ... --&gt;
<span class="w"> </span>   &lt;groupId&gt;proxy&lt;/groupId&gt;
<span class="w"> </span>   &lt;artifactId&gt;http_proxy&lt;/artifactId&gt;
<span class="gd">-      &lt;version&gt;1.1.0&lt;/version&gt;</span>
<span class="gi">+      &lt;version&gt;1.1.1&lt;/version&gt;</span>
<span class="w"> </span>   &lt;type&gt;war&lt;/type&gt;
<span class="w"> </span>   &lt;scope&gt;runtime&lt;/scope&gt;
<span class="w"> </span>   &lt;/dependency&gt;
</code></pre></div>
<ul>
<li>Set <code>print-lib</code> version <code>geosolutions-2.0</code> to version <code>geosolutions-2.0.1</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>   &lt;dependency&gt;
<span class="w"> </span>       &lt;groupId&gt;org.mapfish.print&lt;/groupId&gt;
<span class="w"> </span>       &lt;artifactId&gt;print-lib&lt;/artifactId&gt;
<span class="gd">-        &lt;version&gt;geosolutions-2.0&lt;/version&gt;</span>
<span class="gi">+        &lt;version&gt;geosolutions-2.0.1&lt;/version&gt;</span>
<span class="w"> </span>   &lt;/dependency&gt;
</code></pre></div>
<h2 id="migration-from-20210104-to-20210200">Migration from 2021.01.04 to 2021.02.00</h2>
<h3 id="theme-updates-and-css-variables">Theme updates and CSS variables</h3>
<p>The theme of MapStore has been updated to support CSS variables for some aspects of the style, in particular colors and font families.
The <code>web/client/themes/default/variables.less</code> file contains all the available variables described under the <code>@ms-theme-vars</code> ruleset.
It is suggested to :</p>
<ul>
<li>update the lesscss variables in the projects because the variables starting with <code>@ms2-</code> will be deprecated soon:</li>
</ul>
<p><code>@ms2-color-text</code> -&gt; <code>@ms-main-color</code>
<code>@ms2-color-background</code> -&gt; <code>@ms-main-bg</code>
<code>@ms2-color-shade-lighter</code> -&gt; <code>@ms-main-border-color</code></p>
<p><code>@ms2-color-code</code> -&gt; <code>@ms-code-color</code></p>
<p><code>@ms2-color-text-placeholder</code> -&gt; <code>@ms-placeholder-color</code></p>
<p><code>@ms2-color-disabled</code> -&gt; <code>@ms-disabled-bg</code>
<code>@ms2-color-text-disabled</code> -&gt; <code>@ms-disabled-color</code></p>
<p><code>@ms2-color-text-primary</code> -&gt; <code>@ms-primary-contrast</code></p>
<p><code>@ms2-color-primary</code> -&gt; <code>@ms-primary</code>
<code>@ms2-color-info</code> -&gt; <code>@ms-info</code>
<code>@ms2-color-success</code> -&gt; <code>@ms-success</code>
<code>@ms2-color-warning</code> -&gt; <code>@ms-warning</code>
<code>@ms2-color-danger</code> -&gt; <code>@ms-danger</code></p>
<ul>
<li>The font family has been update to <code>Noto Sans</code> so all the html need to be updated removing the previous font link with:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;preconnect&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://fonts.gstatic.com&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://fonts.googleapis.com/css2?family=Noto+Sans&amp;display=swap&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span><span class="p">&gt;</span>
</code></pre></div>
<ul>
<li>if you are importing <code>react-select</code> or <code>react-widgets</code> inline css/less in your own project, you have to remove the import. Now the stile of these libraries is managed at project level</li>
</ul>
<h3 id="project-system">Project system</h3>
<p>During this release MapStore we started an rewrite of the <a href="https://github.com/geosolutions-it/MapStore2/issues/6314">project system</a>, organized in different phases.</p>
<p>The first phase of this migration has been identified by <a href="https://github.com/geosolutions-it/MapStore2/pull/6738">this</a> pull request. In this phase we are supporting the backward compatibility as much as possible, introducing the new project system in parallel with the new one (experimental).
In the future the current script will be deprecated in favor of the new one.</p>
<p>Here below the breaking changes introduced in this release to support this new system:</p>
<p>This section will tell you how to migrate to support the following changes:</p>
<ul>
<li>Minor changes to <code>prod-webpack.config.js</code></li>
<li>Move front-end configuration files in <code>configs</code> folder</li>
<li>Back-end has been reorganized</li>
</ul>
<h4 id="minor-changes-to-prod-webpackconfigjs">Minor changes to <code>prod-webpack.config.js</code></h4>
<p>Minor changes to <code>prod-webpack.config.js</code>:</p>
<div class="highlight"><pre><span></span><code><span class="gh">diff --git a/project/standard/templates/prod-webpack.config.js b/project/standard/templates/prod-webpack.config.js</span>
<span class="gh">index 175bf3398..6d97e2c0f 100644</span>
<span class="gd">--- a/project/standard/templates/prod-webpack.config.js</span>
<span class="gi">+++ b/project/standard/templates/prod-webpack.config.js</span>
<span class="gu">@@ -2,8 +2,8 @@ const path = require(&quot;path&quot;);</span>

<span class="w"> </span>const themeEntries = require(&#39;./MapStore2/build/themes.js&#39;).themeEntries;
<span class="w"> </span>const extractThemesPlugin = require(&#39;./MapStore2/build/themes.js&#39;).extractThemesPlugin;
<span class="gd">-const ModuleFederationPlugin = require(&#39;./MapStore2/build/moduleFederation&#39;).plugin;</span>
<span class="w"> </span>const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);
<span class="gi">+const ModuleFederationPlugin = require(&#39;./MapStore2/build/moduleFederation&#39;).plugin;</span>

<span class="w"> </span>const paths = {
<span class="w"> </span>    base: __dirname,
<span class="gu">@@ -24,17 +24,19 @@ module.exports = require(&#39;./MapStore2/build/buildConfig&#39;)(</span>
<span class="w"> </span>    paths,
<span class="w"> </span>    [extractThemesPlugin, ModuleFederationPlugin],
<span class="w"> </span>    true,
<span class="gd">-    &quot;dist/&quot;,</span>
<span class="gi">+    undefined,</span>
<span class="w"> </span>    &#39;.__PROJECTNAME__&#39;,
<span class="w"> </span>    [
<span class="w"> </span>        new HtmlWebpackPlugin({
<span class="w"> </span>            template: path.join(__dirname, &#39;indexTemplate.html&#39;),
<span class="gi">+            publicPath: &#39;dist/&#39;,</span>
<span class="w"> </span>            chunks: [&#39;__PROJECTNAME__&#39;],
<span class="w"> </span>            inject: &quot;body&quot;,
<span class="w"> </span>            hash: true
<span class="w"> </span>        }),
<span class="w"> </span>        new HtmlWebpackPlugin({
<span class="w"> </span>            template: path.join(__dirname, &#39;embeddedTemplate.html&#39;),
<span class="gi">+            publicPath: &#39;dist/&#39;,</span>
<span class="w"> </span>            chunks: [&#39;__PROJECTNAME__-embedded&#39;],
<span class="w"> </span>            inject: &quot;body&quot;,
<span class="w"> </span>            hash: true,
<span class="gu">@@ -42,13 +44,15 @@ module.exports = require(&#39;./MapStore2/build/buildConfig&#39;)(</span>
<span class="w"> </span>        }),
<span class="w"> </span>        new HtmlWebpackPlugin({
<span class="w"> </span>            template: path.join(__dirname, &#39;apiTemplate.html&#39;),
<span class="gi">+            publicPath: &#39;dist/&#39;,</span>
<span class="w"> </span>            chunks: [&#39;__PROJECTNAME__-api&#39;],
<span class="gd">-            inject: &#39;head&#39;,</span>
<span class="gi">+            inject: &#39;body&#39;,</span>
<span class="w"> </span>            hash: true,
<span class="w"> </span>            filename: &#39;api.html&#39;
<span class="w"> </span>        }),
<span class="w"> </span>        new HtmlWebpackPlugin({
<span class="w"> </span>            template: path.join(__dirname, &#39;geostory-embedded-template.html&#39;),
<span class="gi">+            publicPath: &#39;dist/&#39;,</span>
<span class="w"> </span>            chunks: [&#39;geostory-embedded&#39;],
<span class="w"> </span>            inject: &quot;body&quot;,
<span class="w"> </span>            hash: true,
<span class="gu">@@ -56,6 +60,7 @@ module.exports = require(&#39;./MapStore2/build/buildConfig&#39;)(</span>
<span class="w"> </span>        }),
<span class="w"> </span>        new HtmlWebpackPlugin({
<span class="w"> </span>            template: path.join(__dirname, &#39;dashboard-embedded-template.html&#39;),
<span class="gi">+            publicPath: &#39;dist/&#39;,</span>
<span class="w"> </span>            chunks: [&#39;dashboard-embedded&#39;],
<span class="w"> </span>            inject: &#39;body&#39;,
<span class="w"> </span>            hash: true,
<span class="gu">@@ -63,6 +68,7 @@ module.exports = require(&#39;./MapStore2/build/buildConfig&#39;)(</span>
<span class="w"> </span>        })
<span class="w"> </span>    ],
<span class="w"> </span>    {
<span class="gi">+        &quot;@mapstore/patcher&quot;: path.resolve(__dirname, &quot;node_modules&quot;, &quot;@mapstore&quot;, &quot;patcher&quot;),</span>
<span class="w"> </span>        &quot;@mapstore&quot;: path.resolve(__dirname, &quot;MapStore2&quot;, &quot;web&quot;, &quot;client&quot;),
<span class="w"> </span>        &quot;@js&quot;: path.resolve(__dirname, &quot;js&quot;)
<span class="w"> </span>    }
</code></pre></div>
<h4 id="move-front-end-configuration-files-in-configs-folder">Move front-end configuration files in <code>configs</code> folder</h4>
<p>We suggest you to move them as well from root to configs folder, and align your <code>app.jsx</code> configuration with the new standard (if you changed the location of configs).
This will allow to use the data dir in an easy way. So:</p>
<ul>
<li>Move the following files in <code>configs</code> directory:</li>
<li><code>localConfig.json</code></li>
<li><code>new.json</code></li>
<li><code>pluginsConfig.json</code></li>
<li><code>config.json</code></li>
<li><code>simple.json</code></li>
<li>If changed something in <code>app.jsx</code> about configuration, align to get the files moved in config.</li>
<li>To allow MapStore to copy the correct file in the final war, you have to change <code>web/pom.xml</code> execution <code>copy-resources</code> for id <code>config files</code> this way (this only if you didn't customized <code>localConfig.json</code>):</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>       &lt;goal&gt;copy-resources&lt;/goal&gt;
<span class="w"> </span>               &lt;/goals&gt;
<span class="w"> </span>                   &lt;goal&gt;copy-resources&lt;/goal&gt;
<span class="w"> </span>               &lt;/goals&gt;
<span class="w"> </span>                   &lt;configuration&gt;
<span class="gd">-                        &lt;outputDirectory&gt;${basedir}/target/__PROJECTNAME__/MapStore2/web/client&lt;/outputDirectory&gt;</span>
<span class="gi">+                        &lt;outputDirectory&gt;${basedir}/target/__PROJECTNAME__/MapStore2/web/client/configs&lt;/outputDirectory&gt;</span>
<span class="w"> </span>                       &lt;encoding&gt;UTF-8&lt;/encoding&gt;
<span class="w"> </span>                       &lt;resources&gt;
<span class="w"> </span>                           &lt;resource&gt;
<span class="gd">-                                &lt;directory&gt;${basedir}/../MapStore2/web/client&lt;/directory&gt;</span>
<span class="gi">+                                &lt;directory&gt;${basedir}/../MapStore2/web/client/configs&lt;/directory&gt;</span>
<span class="w"> </span>                               &lt;includes&gt;
<span class="w"> </span>                                   &lt;include&gt;localConfig.json&lt;/include&gt;
<span class="w"> </span>                               &lt;/includes&gt;
</code></pre></div>
<h4 id="back-end-has-been-reorganized">Back-end has been reorganized</h4>
<p>In particular:</p>
<ul>
<li>all the java code has been moved from <code>web/src/</code> to the <code>java/</code> and <code>product/</code> directories (and <code>release</code>, already existing).</li>
<li><code>mapstore-backend</code> has been renamed into <code>mapstore-services</code>.</li>
<li>Some servlets have been added in order to provide native support to data dir and make it work with the new <code>configs</code> directory.</li>
</ul>
<p>So you will have to:</p>
<ul>
<li>Align the <code>pom.xml</code> to the latest versions of the libs</li>
<li>Edit the <code>web.xml</code> and change the <code>*-servlet.xml</code> files to expose the new services</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Future evolution of the project will avoid you to keep your own copies of the pom files as much as possible, reducing the boilerplate and making
migration a lot easier. For this reasons these migration guidelines will change soon.</p>
</div>
<p>Here below the details of the changes.</p>
<h5 id="align-pomxml-files-to-latest-versions-of-the-libs">Align <code>pom.xml</code> files to latest versions of the libs</h5>
<p>Here the changes in <code>pom.xml</code> and `web/pom.xml to update:</p>
<ul>
<li>Change <code>mapstore-backend</code> into <code>mapstore-services</code> and set the version to <code>1.2.1</code></li>
</ul>
<div class="highlight"><pre><span></span><code>&lt;!-- MapStore backend --&gt;
<span class="w"> </span>   &lt;dependency&gt;
<span class="w"> </span>   &lt;groupId&gt;it.geosolutions.mapstore&lt;/groupId&gt;
<span class="gd">-      &lt;artifactId&gt;mapstore-backend&lt;/artifactId&gt;</span>
<span class="gd">-      &lt;version&gt;1.1.2&lt;/version&gt;</span>
<span class="gi">+      &lt;artifactId&gt;mapstore-services&lt;/artifactId&gt;</span>
<span class="gi">+      &lt;version&gt;1.2.1&lt;/version&gt;</span>
<span class="w"> </span>   &lt;/dependency&gt;
</code></pre></div>
<ul>
<li>Set <code>geostore-webapp</code> version to <code>1.7.0</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>   &lt;dependency&gt;
<span class="w"> </span>   &lt;groupId&gt;it.geosolutions.geostore&lt;/groupId&gt;
<span class="w"> </span>   &lt;artifactId&gt;geostore-webapp&lt;/artifactId&gt;
<span class="gd">-      &lt;version&gt;1.6.0&lt;/version&gt;</span>
<span class="gi">+      &lt;version&gt;1.7.0&lt;/version&gt;</span>
<span class="w"> </span>   &lt;type&gt;war&lt;/type&gt;
<span class="w"> </span>   &lt;scope&gt;runtime&lt;/scope&gt;
<span class="w"> </span>   &lt;/dependency&gt;
</code></pre></div>
<ul>
<li>Set <code>http_proxy</code> version to <code>1.1.0</code> (should already be there)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>   &lt;dependency&gt;
<span class="w"> </span>   &lt;!-- ... --&gt;
<span class="w"> </span>   &lt;groupId&gt;proxy&lt;/groupId&gt;
<span class="w"> </span>   &lt;artifactId&gt;http_proxy&lt;/artifactId&gt;
<span class="gd">-      &lt;version&gt;1.1.0&lt;/version&gt;</span>
<span class="gi">+      &lt;version&gt;1.1-SNAPSHOT&lt;/version&gt;</span>
<span class="w"> </span>   &lt;type&gt;war&lt;/type&gt;
<span class="w"> </span>   &lt;scope&gt;runtime&lt;/scope&gt;
<span class="w"> </span>   &lt;/dependency&gt;
</code></pre></div>
<h5 id="edit-the-webxml-and-change-the-servletxml-files-to-expose-the-new-services">Edit the <code>web.xml</code> and change the <code>*-servlet.xml</code> files to expose the new services</h5>
<ul>
<li>Copy from mapstore to folder <code>web/src/main/webapp/WEB-INF/</code> the files:</li>
<li><code>configs-servlet.xml</code></li>
<li><code>extensions-servlet.xml</code></li>
<li><code>loadAssets-servlet.xml</code></li>
<li>Remove the old <code>dispatcher-servlet.xml</code> (it has been replaced by <code>loadAssets-servlet.xml</code> for backward compatibility)</li>
<li>Align <code>web/src/main/webapp/WEB-INF/web.xml</code> with the new servlets as changes below (remove <code>dispatcher</code> entry in favour of the following).</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gu">@@ -1,6 +1,6 @@</span>
<span class="w"> </span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
<span class="w"> </span>&lt;web-app id=&quot;WebApp_ID&quot; version=&quot;2.4&quot;
<span class="gd">-    xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="gi">+    xmlns:javaee=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="w"> </span>    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;

<span class="w"> </span>    &lt;!-- pick up all spring application contexts --&gt;
<span class="gu">@@ -19,13 +19,16 @@</span>

<span class="w"> </span>    &lt;context-param&gt;
<span class="w"> </span>      &lt;param-name&gt;proxyPropPath&lt;/param-name&gt;
<span class="gd">-      &lt;param-value&gt;/proxy.properties&lt;/param-value&gt;</span>
<span class="gi">+      &lt;param-value&gt;/proxy.properties,${datadir.location}/proxy.properties&lt;/param-value&gt;</span>
<span class="w"> </span>    &lt;/context-param&gt;

<span class="gd">-    &lt;!-- spring context loader --&gt;</span>
<span class="gd">-    &lt;listener&gt;</span>
<span class="gi">+    &lt;!-- &lt;context-param&gt; &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt; &lt;param-value&gt;file:${config.dir}/log4j.xml&lt;/param-value&gt;</span>
<span class="gi">+        &lt;/context-param&gt; --&gt;</span>
<span class="gi">+</span>
<span class="gi">+    &lt;!-- spring context loader --&gt;</span>
<span class="gi">+    &lt;listener&gt;</span>
<span class="w"> </span>        &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt;
<span class="gd">-    &lt;/listener&gt;</span>
<span class="gi">+    &lt;/listener&gt;</span>

<span class="w"> </span>    &lt;!--
<span class="w"> </span>      - Loads the root application context of this web app at startup.
<span class="gu">@@ -33,8 +36,8 @@</span>
<span class="w"> </span>      - WebApplicationContextUtils.getWebApplicationContext(servletContext).
<span class="w"> </span>    --&gt;
<span class="w"> </span>    &lt;listener&gt;
<span class="gd">-        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span>
<span class="gd">-    &lt;/listener&gt;</span>
<span class="gi">+        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span>
<span class="gi">+    &lt;/listener&gt;</span>

<span class="w"> </span>    &lt;!-- Spring Security Servlet --&gt;
<span class="w"> </span>    &lt;filter&gt;
<span class="gu">@@ -46,7 +49,7 @@</span>
<span class="w"> </span>        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;
<span class="w"> </span>    &lt;/filter-mapping&gt;

<span class="gd">-  &lt;!-- GZip compression --&gt;</span>
<span class="gi">+    &lt;!-- GZip compression --&gt;</span>
<span class="w"> </span>    &lt;filter&gt;
<span class="w"> </span>        &lt;filter-name&gt;CompressionFilter&lt;/filter-name&gt;
<span class="w"> </span>        &lt;filter-class&gt;net.sf.ehcache.constructs.web.filter.GzipFilter&lt;/filter-class&gt;
<span class="gu">@@ -65,17 +68,38 @@</span>
<span class="w"> </span>    &lt;/filter-mapping&gt;

<span class="w"> </span>    &lt;!--  Backend Spring MVC controllers --&gt;
<span class="gi">+    &lt;!--  Backward compatibility --&gt;</span>
<span class="w"> </span>    &lt;servlet&gt;
<span class="gd">-        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</span>
<span class="gi">+        &lt;servlet-name&gt;loadAssets&lt;/servlet-name&gt;</span>
<span class="w"> </span>        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
<span class="w"> </span>        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
<span class="w"> </span>    &lt;/servlet&gt;
<span class="w"> </span>    &lt;servlet-mapping&gt;
<span class="gd">-        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</span>
<span class="gi">+        &lt;servlet-name&gt;loadAssets&lt;/servlet-name&gt;</span>
<span class="w"> </span>        &lt;url-pattern&gt;/rest/config/*&lt;/url-pattern&gt;
<span class="w"> </span>    &lt;/servlet-mapping&gt;
<span class="gi">+    &lt;!--  Configs --&gt;</span>
<span class="gi">+    &lt;servlet&gt;</span>
<span class="gi">+        &lt;servlet-name&gt;configs&lt;/servlet-name&gt;</span>
<span class="gi">+        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span>
<span class="gi">+        &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;</span>
<span class="gi">+    &lt;/servlet&gt;</span>
<span class="gi">+    &lt;servlet-mapping&gt;</span>
<span class="gi">+        &lt;servlet-name&gt;configs&lt;/servlet-name&gt;</span>
<span class="gi">+        &lt;url-pattern&gt;/configs/*&lt;/url-pattern&gt;</span>
<span class="gi">+    &lt;/servlet-mapping&gt;</span>
<span class="gi">+    &lt;!-- Extensions --&gt;</span>
<span class="gi">+    &lt;servlet&gt;</span>
<span class="gi">+        &lt;servlet-name&gt;extensions&lt;/servlet-name&gt;</span>
<span class="gi">+        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span>
<span class="gi">+        &lt;load-on-startup&gt;3&lt;/load-on-startup&gt;</span>
<span class="gi">+    &lt;/servlet&gt;</span>
<span class="gi">+    &lt;servlet-mapping&gt;</span>
<span class="gi">+        &lt;servlet-name&gt;extensions&lt;/servlet-name&gt;</span>
<span class="gi">+        &lt;url-pattern&gt;/extensions/*&lt;/url-pattern&gt;</span>
<span class="gi">+    &lt;/servlet-mapping&gt;</span>

<span class="gd">-    &lt;!-- CXF Servlet --&gt;</span>
<span class="gi">+    &lt;!-- CXF Servlet --&gt;</span>
<span class="w"> </span>    &lt;servlet&gt;
<span class="w"> </span>        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
<span class="w"> </span>        &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;
<span class="gu">@@ -97,7 +121,7 @@</span>
<span class="w"> </span>      &lt;url-pattern&gt;/proxy/*&lt;/url-pattern&gt;
<span class="w"> </span>    &lt;/servlet-mapping&gt;

<span class="gd">-   &lt;!-- Printing Servlet --&gt;</span>
<span class="gi">+    &lt;!-- Printing Servlet --&gt;</span>
<span class="w"> </span>    &lt;servlet&gt;
<span class="w"> </span>       &lt;servlet-name&gt;mapfish.print&lt;/servlet-name&gt;
<span class="w"> </span>       &lt;servlet-class&gt;org.mapfish.print.servlet.MapPrinterServlet&lt;/servlet-class&gt;
</code></pre></div>
<h4 id="data-directory-has-been-reorganized-and-is-now-available-also-for-product">Data directory has been reorganized and is now available also for product</h4>
<p>The new organization of the data directory is:</p>
<ul>
<li><code>configs</code> will contain all json files (<code>localConfig.json</code>, <code>new.json</code>, <code>pluginsConfig.json</code>, ...) and all the <code>.patch</code> files applied to them.</li>
<li><code>extensions</code> folder contains all the data for the extensions, including <code>extensions.json</code></li>
<li>The root contains the properties files to configure database, proxy and other configs</li>
</ul>
<p>To organize your old data directory accordingly to the new specification.</p>
<ul>
<li>Move all <code>.json</code> and <code>.json.patch</code> files in <code>configs</code> folder (except <code>extensions.json</code>)</li>
<li>Move the directory <code>dist/extensions</code> to simply <code>extensions</code>.</li>
<li>The file <code>extensions.json</code> have to be moved in <code>extensions/extensions.json</code>.</li>
<li>Edit the file <code>extensions/extensions.json</code> changing the paths from <code>dist/extensions/&lt;Plugin-Name&gt;/...</code> to <code>&lt;Plugin-Name&gt;/...</code></li>
</ul>
<p>You can set it up by configuring <code>datadir.location</code> java system property. Changes to paths or configuration files are not required anymore.</p>
<h3 id="configurations">Configurations</h3>
<ul>
<li>Embedded now uses popup as default. Align localConfig.json <code>plugins --&gt; embedded --&gt; Identify</code> with the latest one:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Identify&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;cfg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;showInMapPopup&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;viewerOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;container&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{context.ReactSwipe}&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="migration-from-20210101-to-20210103">Migration from 2021.01.01 to 2021.01.03</h2>
<p>Generally speaking this is not properly a breaking change, but more a fix to apply to your installations. Certificate for 'cesiumjs.org' has expired at 2021.05.05, so to continue using CesiumJS with MapStore
you will have to replace all the URLs like <code>https://cesiumjs.org/releases/1.17</code> in <code>https://cesium.com/downloads/cesiumjs/releases/1.17</code>. This is the main fix of this minor release.
See <a href="https://github.com/geosolutions-it/MapStore2/pull/6856">this pull request on GitHub</a> as a sample to apply these changes to your project.</p>
<h2 id="migration-from-20210100-to-20210101">Migration from 2021.01.00 to 2021.01.01</h2>
<h3 id="update-embedded-entry-to-load-the-correct-configuration">Update embedded entry to load the correct configuration</h3>
<p>Existing MapStore project could have an issue with the loading of map embedded page due to the impossibility to change some configuration such as localConfig.json or translations path in the javascript entry.
This issue can be solved following these steps:
1 - add a custom entry named <code>embedded.jsx</code> in the <code>js/</code> directory of the project with the content:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setConfigProp</span><span class="p">,</span>
<span class="w">    </span><span class="nx">setLocalConfigurationFile</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@mapstore/utils/ConfigUtils&#39;</span><span class="p">;</span>

<span class="c1">// Add custom (overriding) translations</span>
<span class="c1">// example for additional translations in the project folder</span>
<span class="c1">// setConfigProp(&#39;translationsPath&#39;, [&#39;./MapStore2/web/client/translations&#39;, &#39;./translations&#39;]);</span>
<span class="nx">setConfigProp</span><span class="p">(</span><span class="s1">&#39;translationsPath&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;./MapStore2/web/client/translations&#39;</span><span class="p">);</span>
<span class="c1">// __PROJECTNAME__ is the name of the project used in the creation process</span>
<span class="nx">setConfigProp</span><span class="p">(</span><span class="s1">&#39;themePrefix&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;__PROJECTNAME__&#39;</span><span class="p">);</span>

<span class="c1">// Use a custom plugins configuration file</span>
<span class="c1">// example if localConfig.json is located in the root of the project</span>
<span class="c1">// setLocalConfigurationFile(&#39;localConfig.json&#39;);</span>
<span class="nx">setLocalConfigurationFile</span><span class="p">(</span><span class="s1">&#39;MapStore2/web/client/localConfig.json&#39;</span><span class="p">);</span>

<span class="c1">// async load of the standard embedded bundle</span>
<span class="k">import</span><span class="p">(</span><span class="s1">&#39;@mapstore/product/embedded&#39;</span><span class="p">);</span>
</code></pre></div>
<p>2 - update the path of the embedded entry inside the <code>webpack.config.js</code> and <code>prod-webpack.config.js</code> files with:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// __PROJECTNAME__ is the name of the project used in the creation process</span>
<span class="s1">&#39;__PROJECTNAME__-embedded&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;js&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;embedded&quot;</span><span class="p">),</span>
</code></pre></div>
<h3 id="locate-plugin-configuration">Locate plugin configuration</h3>
<p>Configuration for Locate plugin has changed and it is not needed anymore inside the Map plugin</p>
<ul>
<li>old localConfig.json configuration needed 'locate' listed as tool inside the Map plugin and as a separated Locate plugin</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// ...</span>
<span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Map&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;cfg&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;tools&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;locate&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Locate&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div>
<ul>
<li>new localConfig.json configuration removes 'locate' from tools array and it keeps only the plugin configuration</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// ...</span>
<span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Map&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;cfg&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Locate&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div>
<h3 id="update-an-existing-project-to-include-embedded-dashboards-and-geostories">Update an existing project to include embedded Dashboards and GeoStories</h3>
<p>Embedded Dashboards and GeoStories need a new set of javascript entries, html templates and configuration files to make them completely available in an existing project.</p>
<p>The steps described above assume this structure of the MapStore2 project for the files that need update:</p>
<div class="highlight"><pre><span></span><code>MapStore2Project/
|-- ...
|-- js/
|    |-- ...
|    |-- dashboardEmbedded.jsx (new)
|    |-- geostoryEmbedded.jsx (new)
|-- MapStore2/
|-- web/
|    |-- ...
|    |-- pom.xml
|-- ...
|-- dashboard-embedded-template.html (new)
|-- dashboard-embedded.html (new)
|-- ...
|-- geostory-embedded-template.html (new)
|-- geostory-embedded.html (new)
|-- ...
|-- prod-webpack.config.js
|-- ...
|-- webpack.config.js
</code></pre></div>
<p>1) create the entries files for the embedded application named <code>dashboardEmbedded.jsx</code> and <code>geostoryEmbedded.jsx</code> in the js/ folder with the following content (see links):
    - <a href="https://github.com/geosolutions-it/MapStore2/blob/2021.01.xx/project/standard/templates/js/dashboardEmbedded.jsx">dashboardEmbedded.jsx</a>
    - <a href="https://github.com/geosolutions-it/MapStore2/blob/2021.01.xx/project/standard/templates/js/geostoryEmbedded.jsx">geostoryEmbedded.jsx</a></p>
<p>2) add the html files and templates in the root directory of the project with these names and content (see links):
    - <a href="https://github.com/geosolutions-it/MapStore2/blob/2021.01.xx/project/standard/templates/dashboard-embedded-template.html">dashboard-embedded-template.html</a>
    - <a href="https://github.com/geosolutions-it/MapStore2/blob/2021.01.xx/project/standard/templates/dashboard-embedded.html">dashboard-embedded.html</a>
    - <a href="https://github.com/geosolutions-it/MapStore2/blob/2021.01.xx/project/standard/templates/geostory-embedded-template.html">geostory-embedded-template.html</a>
    - <a href="https://github.com/geosolutions-it/MapStore2/blob/2021.01.xx/project/standard/templates/geostory-embedded.html">geostory-embedded.html</a></p>
<p>3) update webpack configuration for development and production with the new entries and the related configuration:</p>
<div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="n">webpack</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">js</span>

<span class="err">```</span><span class="n">js</span>
<span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">&#39;./MapStore2/build/buildConfig&#39;</span><span class="p">)(</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">entries</span><span class="o">...</span><span class="p">,</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">embedded</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">object</span>
<span class="w">        </span><span class="s2">&quot;geostory-embedded&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;js&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;geostoryEmbedded&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="s2">&quot;dashboard-embedded&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;js&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dashboardEmbedded&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="p">);</span>
<span class="err">```</span>

<span class="o">-</span><span class="w"> </span><span class="n">prod</span><span class="o">-</span><span class="n">webpack</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">js</span>

<span class="err">```</span><span class="n">js</span>

<span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">&#39;./MapStore2/build/buildConfig&#39;</span><span class="p">)(</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">entries</span><span class="o">...</span><span class="p">,</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">embedded</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">object</span>
<span class="w">        </span><span class="s2">&quot;geostory-embedded&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;js&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;geostoryEmbedded&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="s2">&quot;dashboard-embedded&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;js&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dashboardEmbedded&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="w">    </span><span class="p">[</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">HtmlWebpackPlugin</span><span class="p">({</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}),</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">embedded</span><span class="w"> </span><span class="n">html</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">inject</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">bundle</span>
<span class="w">        </span><span class="n">new</span><span class="w"> </span><span class="n">HtmlWebpackPlugin</span><span class="p">({</span>
<span class="w">            </span><span class="n">template</span><span class="p">:</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;geostory-embedded-template.html&#39;</span><span class="p">),</span>
<span class="w">            </span><span class="n">chunks</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;geostory-embedded&#39;</span><span class="p">],</span>
<span class="w">            </span><span class="n">inject</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;body&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nb">hash</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span>
<span class="w">            </span><span class="n">filename</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;geostory-embedded.html&#39;</span>
<span class="w">        </span><span class="p">}),</span>
<span class="w">        </span><span class="n">new</span><span class="w"> </span><span class="n">HtmlWebpackPlugin</span><span class="p">({</span>
<span class="w">            </span><span class="n">template</span><span class="p">:</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;dashboard-embedded-template.html&#39;</span><span class="p">),</span>
<span class="w">            </span><span class="n">chunks</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;dashboard-embedded&#39;</span><span class="p">],</span>
<span class="w">            </span><span class="n">inject</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;body&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="nb">hash</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span>
<span class="w">            </span><span class="n">filename</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;dashboard-embedded.html&#39;</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="p">);</span>
<span class="err">```</span>
</code></pre></div></td></tr></table></div>

<p>4) Add configuration to localConfig.json in the plugins section related to Share functionalities (Only with custom localConfig.json in the project):
    - Dashboard share configuration</p>
<div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code>```js
&quot;dashboard&quot;: [
    // ...
    {
        &quot;name&quot;: &quot;Share&quot;,
        &quot;cfg&quot;: {
            &quot;showAPI&quot;: false,
            &quot;advancedSettings&quot;: false,
            &quot;shareUrlRegex&quot;: &quot;(h[^#]*)#\\/dashboard\\/([A-Za-z0-9]*)&quot;,
            &quot;shareUrlReplaceString&quot;: &quot;$1dashboard-embedded.html#/$2&quot;,
            &quot;embedOptions&quot;: {
                &quot;showTOCToggle&quot;: false,
                &quot;showConnectionsParamToggle&quot;: true
            }
        }
    },
    // ...
]
<span class="s">```</span>

- Dashboard share configuration

```js
&quot;geostory&quot;: [
    // ...
    {
        &quot;name&quot;: &quot;Share&quot;,
        &quot;cfg&quot;: {
            &quot;embedPanel&quot;: true,
            &quot;showAPI&quot;: false,
            &quot;advancedSettings&quot;: {
                &quot;hideInTab&quot;: &quot;embed&quot;,
                &quot;homeButton&quot;: true,
                &quot;sectionId&quot;: true
            },
            &quot;shareUrlRegex&quot;: &quot;(h[^#]*)#\\/geostory\\/([^\\/]*)\\/([A-Za-z0-9]*)&quot;,
            &quot;shareUrlReplaceString&quot;: &quot;$1geostory-embedded.html#/$3&quot;,
            &quot;embedOptions&quot;: {
                &quot;showTOCToggle&quot;: false
            }
        }
    },
    // ...
]
<span class="s">```</span>
</code></pre></div></td></tr></table></div>

<p>5) update the web/pom.xml to copy all the related resources in the final *.war file with these new executions</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- __PROJECTNAME__ should be equal to the one in use in the project, see other executions how they define the outputDirectory path  --&gt;</span>
<span class="nt">&lt;execution&gt;</span>
<span class="w">    </span><span class="nt">&lt;id&gt;</span>only<span class="w"> </span>dashboard-embedded.html<span class="nt">&lt;/id&gt;</span>
<span class="w">    </span><span class="nt">&lt;phase&gt;</span>process-classes<span class="nt">&lt;/phase&gt;</span>
<span class="w">    </span><span class="nt">&lt;goals&gt;</span>
<span class="w">        </span><span class="nt">&lt;goal&gt;</span>copy-resources<span class="nt">&lt;/goal&gt;</span>
<span class="w">    </span><span class="nt">&lt;/goals&gt;</span>
<span class="w">    </span><span class="nt">&lt;configuration&gt;</span>
<span class="w">        </span><span class="nt">&lt;outputDirectory&gt;</span>${basedir}/target/__PROJECTNAME__<span class="nt">&lt;/outputDirectory&gt;</span>
<span class="w">        </span><span class="nt">&lt;encoding&gt;</span>UTF-8<span class="nt">&lt;/encoding&gt;</span>
<span class="w">        </span><span class="nt">&lt;resources&gt;</span>
<span class="w">            </span><span class="nt">&lt;resource&gt;</span>
<span class="w">                </span><span class="nt">&lt;directory&gt;</span>${basedir}/../dist<span class="nt">&lt;/directory&gt;</span>
<span class="w">                </span><span class="nt">&lt;includes&gt;</span>
<span class="w">                    </span><span class="nt">&lt;include&gt;</span>dashboard-embedded.html<span class="nt">&lt;/include&gt;</span>
<span class="w">                </span><span class="nt">&lt;/includes&gt;</span>
<span class="w">                </span><span class="nt">&lt;excludes&gt;</span>
<span class="w">                    </span><span class="nt">&lt;exclude&gt;</span>MapStore2/*<span class="nt">&lt;/exclude&gt;</span>
<span class="w">                    </span><span class="nt">&lt;exclude&gt;</span>MapStore2/**/*<span class="nt">&lt;/exclude&gt;</span>
<span class="w">                </span><span class="nt">&lt;/excludes&gt;</span>
<span class="w">            </span><span class="nt">&lt;/resource&gt;</span>
<span class="w">        </span><span class="nt">&lt;/resources&gt;</span>
<span class="w">    </span><span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/execution&gt;</span>
<span class="nt">&lt;execution&gt;</span>
<span class="w">    </span><span class="nt">&lt;id&gt;</span>only<span class="w"> </span>geostory-embedded.html<span class="nt">&lt;/id&gt;</span>
<span class="w">    </span><span class="nt">&lt;phase&gt;</span>process-classes<span class="nt">&lt;/phase&gt;</span>
<span class="w">    </span><span class="nt">&lt;goals&gt;</span>
<span class="w">        </span><span class="nt">&lt;goal&gt;</span>copy-resources<span class="nt">&lt;/goal&gt;</span>
<span class="w">    </span><span class="nt">&lt;/goals&gt;</span>
<span class="w">    </span><span class="nt">&lt;configuration&gt;</span>
<span class="w">        </span><span class="nt">&lt;outputDirectory&gt;</span>${basedir}/target/__PROJECTNAME__<span class="nt">&lt;/outputDirectory&gt;</span>
<span class="w">        </span><span class="nt">&lt;encoding&gt;</span>UTF-8<span class="nt">&lt;/encoding&gt;</span>
<span class="w">        </span><span class="nt">&lt;resources&gt;</span>
<span class="w">            </span><span class="nt">&lt;resource&gt;</span>
<span class="w">                </span><span class="nt">&lt;directory&gt;</span>${basedir}/../dist<span class="nt">&lt;/directory&gt;</span>
<span class="w">                </span><span class="nt">&lt;includes&gt;</span>
<span class="w">                    </span><span class="nt">&lt;include&gt;</span>geostory-embedded.html<span class="nt">&lt;/include&gt;</span>
<span class="w">                </span><span class="nt">&lt;/includes&gt;</span>
<span class="w">                </span><span class="nt">&lt;excludes&gt;</span>
<span class="w">                    </span><span class="nt">&lt;exclude&gt;</span>MapStore2/*<span class="nt">&lt;/exclude&gt;</span>
<span class="w">                    </span><span class="nt">&lt;exclude&gt;</span>MapStore2/**/*<span class="nt">&lt;/exclude&gt;</span>
<span class="w">                </span><span class="nt">&lt;/excludes&gt;</span>
<span class="w">            </span><span class="nt">&lt;/resource&gt;</span>
<span class="w">        </span><span class="nt">&lt;/resources&gt;</span>
<span class="w">    </span><span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/execution&gt;</span>
</code></pre></div>
<h2 id="migration-from-20200200-to-20210100">Migration from 2020.02.00 to 2021.01.00</h2>
<h3 id="update-to-webpack-5-module-federation">Update to webpack 5 - Module federation</h3>
<p>MapStore migrated to webpack 5 and provided the extension system using "Webpack Module Federation". Here the steps to update the existing files in your project.</p>
<p><strong>package.json</strong>:</p>
<ul>
<li>dev server scripts changed syntax. now you need to use <code>webpack serve</code> instead of <code>webpack-dev-server</code>. Replace also all <code>--colors</code> with <code>--color</code> in your scripts that use webpack / webpack-dev-server.</li>
<li>Align <code>dependencies</code> and <code>devDependencies</code> with MapStore's one, reading the <code>package.json</code>, as usual.</li>
<li>To support extensions in your project, you need to add <code>ModuleFederationPlugin</code> to your <code>prod-webpack.config.js</code> and <code>webpack.config.js</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">ModuleFederationPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./MapStore/build/moduleFederation&#39;</span><span class="p">).</span><span class="nx">plugin</span><span class="p">;</span><span class="w"> </span><span class="c1">// &lt;-- new line</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./buildConfig&#39;</span><span class="p">)(</span>
<span class="w">    </span><span class="nx">assign</span><span class="p">({</span>
<span class="w">        </span><span class="s2">&quot;mapstore2&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;product&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="s2">&quot;embedded&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;product&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;embedded&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="s2">&quot;ms2-api&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;product&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;api&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./examples&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">),</span>
<span class="w">    </span><span class="nx">themeEntries</span><span class="p">,</span>
<span class="w">    </span><span class="nx">paths</span><span class="p">,</span>
<span class="w">    </span><span class="nx">extractThemesPlugin</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="nx">extractThemesPlugin</span><span class="p">,</span><span class="w"> </span><span class="nx">ModuleFederationPlugin</span><span class="p">],</span><span class="w"> </span><span class="c1">// &lt;-- this parameter has been changed, now it accepts also array of the plugins you want to add bot in prod and dev</span>
</code></pre></div>
<p>Other the other changes required are applied automatically in <code>buildConfig.js</code>.</p>
<h3 id="eslint-config">Eslint config</h3>
<p>Now eslint configuration is shared in a separate npm module. To update your custom project you have to remove the following files:</p>
<ul>
<li><code>.eslintignore</code></li>
<li><code>.eslintconfig</code></li>
</ul>
<p>And add to <code>package.json</code> the following entry, in the root:</p>
<div class="highlight"><pre><span></span><code><span class="w">        </span><span class="nt">&quot;eslintConfig&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;extends&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;@mapstore/eslint-config-mapstore&quot;</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;parserOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;babelOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;configFile&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./MapStore2/build/babel.config.js&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
</code></pre></div>
<p>If you have aproject that includes MapStore as a dependency, you can run <code>npm run updateDevDeps</code> to finalize the update. Otherwise make you sure to include:</p>
<ul>
<li>devDependencies:</li>
<li>add <code>"@mapstore/eslint-config-mapstore": "1.0.1",</code></li>
<li>delete <code>babel-eslint</code></li>
<li>dependencies:</li>
<li>update `"eslint": "7.8.1"</li>
</ul>
<h3 id="app-structure-review">App structure review</h3>
<p>From this version some base components of MapStore App (<code>StandardApp</code>, <code>StandardStore</code>...) has been restructured and better organized. Here a list of the breaking change you can find in a depending project</p>
<ul>
<li><code>web/client/product/main.jsx</code> has been updated to new <code>import</code> and <code>export</code> syntax (removed <code>require</code> and <code>exports.module</code>). So if you are importing it (usually in your <code>app.jsx</code>) you have to use the <code>import</code> syntax or use <code>require(...).default</code> in your project. The same for the other files.</li>
<li>New structure of arguments in web/client/stores/StandardStore.js</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">appStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">initialState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">defaultState</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nx">mobile</span><span class="o">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">appReducers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nx">appEpics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nx">rootReducerFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">,</span><span class="w"> </span><span class="nx">allReducers</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">allReducers</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">plugins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nx">storeOpts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span>
</code></pre></div>
<ul>
<li>
<p>Moved standard epics, standard reducers and standard rootReducer function from web/client/stores/StandardStore.js to a separated file web/client/stores/defaultOptions.js</p>
</li>
<li>
<p>loading extensions functionalities inside StandardApp has been moved to an specific withExtensions HOC, so if you are not using <code>main.js</code> but directly <code>StandardApp</code> and you need extensions you need to add this HOC to your StandardApp</p>
</li>
</ul>
<h2 id="migration-from-20200100-to-20200200">Migration from 2020.01.00 to 2020.02.00</h2>
<h3 id="new-authentication-rule-for-internal-services">New authentication rule for internal services</h3>
<p>With this new version the support for uploading extensions has been introduced. A new entry point needs administration authorization to allow the upload of new plugins by the administrator. So:</p>
<ul>
<li>In <code>localConfig.json</code> add the following entry in the <code>authenticationRules</code> array:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;urlPattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.*rest/config.*&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bearer&quot;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>the final entry should look like this</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nt">&quot;authenticationRules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;urlPattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.*geostore.*&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bearer&quot;</span>
<span class="w">      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;urlPattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.*rest/config.*&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bearer&quot;</span>
<span class="w">      </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="p">],</span>
</code></pre></div>
<h3 id="translation-files">Translation files</h3>
<ul>
<li>The translations file extension has been changed into JSON. Now translation files has been renamed from <code>data.&lt;locale&gt;</code> to <code>data.&lt;locale&gt;.json</code>. This change makes the <code>.json</code> extension mandatory for all translation files. This means that depending projects with custom translation files should be renabled in the same name. E.g. <code>data.it-IT</code> have to be renamed as <code>data.it-IT.json</code></li>
</ul>
<h3 id="database-update_2">Database Update</h3>
<p>Database schema has changed. To update your database you need to apply this SQL scripts to your database</p>
<ul>
<li>Update the user schema
run the script available <a href="https://github.com/geosolutions-it/geostore/tree/master/doc/sql/migration/postgresql">here</a>:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">-- Update the geostore database from 1.4.2 model to 1.5.0</span>
<span class="c1">-- It adds fields to gs_security for external authorization</span>

<span class="c1">-- The script assumes that the tables are located into the schema called &quot;geostore&quot;</span>
<span class="c1">--      if you put geostore in a different schema, please edit the following search_path.</span>
<span class="k">SET</span><span class="w"> </span><span class="n">search_path</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">geostore</span><span class="p">,</span><span class="w"> </span><span class="k">public</span><span class="p">;</span>

<span class="c1">-- Tested only with postgres9.1</span>

<span class="c1">-- Run the script with an unprivileged application user allowed to work on schema geostore</span>

<span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">gs_security</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">gs_security</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">groupname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>

<span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">idx_security_username</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">gs_security</span><span class="w"> </span><span class="p">(</span><span class="n">username</span><span class="p">);</span>

<span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">idx_security_groupname</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">gs_security</span><span class="w"> </span><span class="p">(</span><span class="n">groupname</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>Add new categories</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">-- New CONTEXT category</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_category</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">,</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">nextval</span><span class="p">(</span><span class="s1">&#39;geostore.hibernate_sequence&#39;</span><span class="p">),</span><span class="w">  </span><span class="s1">&#39;CONTEXT&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">CONFLICT</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="k">NOTHING</span><span class="p">;</span>
<span class="c1">-- New GEOSTORY category (introduced in 2020.01.00)</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_category</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">,</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="n">nextval</span><span class="p">(</span><span class="s1">&#39;geostore.hibernate_sequence&#39;</span><span class="p">),</span><span class="w">  </span><span class="s1">&#39;GEOSTORY&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">CONFLICT</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="k">NOTHING</span><span class="p">;</span>
<span class="c1">-- New TEMPLATE category</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_category</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">,</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">nextval</span><span class="p">(</span><span class="s1">&#39;geostore.hibernate_sequence&#39;</span><span class="p">),</span><span class="w">  </span><span class="s1">&#39;TEMPLATE&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">CONFLICT</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="k">NOTHING</span><span class="p">;</span>
<span class="c1">-- New USERSESSION category</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_category</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">,</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">nextval</span><span class="p">(</span><span class="s1">&#39;geostore.hibernate_sequence&#39;</span><span class="p">),</span><span class="w">  </span><span class="s1">&#39;USERSESSION&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">CONFLICT</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="k">NOTHING</span><span class="p">;</span>
</code></pre></div>
<h3 id="backend-update">Backend update</h3>
<p>For more details see <a href="https://github.com/geosolutions-it/MapStore2/commit/4aa7b917abcb09571af5b9999a38e96f52eac4f3#diff-ac81cff563b78256ef26eca8a5103392592c7138987392a6fb3d79167d11bdcfR66">this</a> commit</p>
<p>new files have been added:</p>
<ul>
<li><code>web/src/main/webapp/WEB-INF/dispatcher-servlet.xml</code></li>
<li><code>web/src/main/resources/mapstore.properties</code></li>
</ul>
<p>some files has been changed:</p>
<ul>
<li><code>web/src/main/webapp/WEB-INF/web.xml</code></li>
<li><code>pom.xml</code></li>
<li><code>web/pom.xml</code></li>
</ul>
<h2 id="migration-from-20190201-to-20200100">Migration from 2019.02.01 to 2020.01.00</h2>
<p>With MapStore <strong>2020.01.00</strong> some dependencies that were previously hosted on github, have now been published on the npm registry, and package.json has been updated accordingly.
<a href="https://github.com/geosolutions-it/MapStore2/pull/4598">Here</a> is the PR that documents how to update local package.json and local webpack if not using the mapstore buildConfig/testConfig common files.</p>
<p>After updating package.json run <strong>npm install</strong>
Now you should be able to run locally with <strong>npm start</strong></p>
<p>For more info see the related <a href="https://github.com/geosolutions-it/MapStore2/issues/4569">issue</a></p>
<p>Moreover a new category has been added for future features, called GEOSTORY.</p>
<p>It is not necessary for this release, but, to follow the update sequence, you can add it by executing the following line.</p>
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">geostore</span><span class="p">.</span><span class="n">gs_category</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">,</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="n">nextval</span><span class="p">(</span><span class="s1">&#39;geostore.hibernate_sequence&#39;</span><span class="p">),</span><span class="w">  </span><span class="s1">&#39;GEOSTORY&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">CONFLICT</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="k">NOTHING</span><span class="p">;</span>
</code></pre></div>
<h2 id="migration-from-20190100-to-20190101">Migration from 2019.01.00 to 2019.01.01</h2>
<p>MapStore <strong>2019.01.01</strong> changes the location of some of the build and test configuration files.
This also affects projects using MapStore build files, sp if you update MapStore subproject to the <strong>2019.01.01</strong> version you also have to update some of the project configuration files. In particular:</p>
<ul>
<li><strong>webpack.config.js</strong> and <strong>prod-webpack.config.js</strong>:</li>
<li>update path to themes.js from ./MapStore2/themes.js to ./MapStore2/build/themes.js</li>
<li>update path to buildConfig from ./MapStore2/buildConfig to ./MapStore2/build/buildConfig</li>
<li><strong>karma.conf.continuous-test.js</strong> and <strong>karma.config.single-run.js</strong>: update path to testConfig from ./MapStore2/testConfig to ./MapStore2/build/testConfig</li>
</ul>
<h2 id="migration-from-20170500-to-20180100">Migration from 2017.05.00 to 2018.01.00</h2>
<p>MapStore <strong>2018.01.00</strong> introduced theme and js and css versioning.
This allows to auto-invalidates cache files for each version of your software.
For custom projects you could choose to ignore this changes by setting version: "no-version" in your app.jsx <code>StandardRouter</code> selector:</p>
<div class="highlight"><pre><span></span><code><span class="c1">//...</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">routerSelector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createSelector</span><span class="p">(</span><span class="nx">state</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">locale</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">locale</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">locale</span><span class="o">:</span><span class="w"> </span><span class="nx">locale</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;no-version&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">themeCfg</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">theme</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;mythheme&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">pages</span>
<span class="p">}));</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">StandardRouter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">connect</span><span class="p">(</span><span class="nx">routerSelector</span><span class="p">)(</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../MapStore2/web/client/components/app/StandardRouter&#39;</span><span class="p">));</span>
<span class="c1">//...</span>
</code></pre></div>
<h3 id="support-jstheme-versioning-in-your-project">Support js/theme versioning in your project</h3>
<p>Take a look to <a href="https://github.com/geosolutions-it/MapStore2/pull/2538/files">this pull request</a> as reference.
Basically versioning is implemented in 2 different ways for css and js files :</p>
<ul>
<li>Add at build time the js files inclusion to the files, with proper hashes.</li>
<li>Load theme css files appending to the URL the ?{version} where version is the current mapstore2 version
The different kind of loading for css files is needed to continue supporting the theme switching capabilities.
For the future we would like to unify these 2 systems. See <a href="https://github.com/geosolutions-it/MapStore2/issues/2554">this issue</a>.</li>
</ul>
<p>You have to:</p>
<ul>
<li>Add the version file to the root (<code>version.txt</code>).</li>
<li>Create a template for each html file you have. These files will replace the html files when you build the final  war file. These files are like the original ones but without the <code>[bundle].js</code> file inclusion and without theme css.</li>
<li>Add <code>HtmlWebpackPlugin</code> for production only, one for each js file. This plugin will add to the template file the script inclusion (<a href="https://github.com/geosolutions-it/MapStore2/pull/2538/files#diff-9d452e0b96db9be8d604c4c9dde575b4">example</a>).</li>
<li>if you have to include the script in the head (e.g. <code>api.html</code> has some script that need the js to be loaded before executing the inline scripts), use the option <code>inject: 'head'</code></li>
<li>change each entry point (<code>app.jsx</code>, <code>api.jsx</code>, <code>embedded.jsx</code>, <code>yourcoustomentrypoint.jsx</code>) this way (<a href="https://github.com/geosolutions-it/MapStore2/pull/2538/files#diff-3bea50c2662e64129704ae694b587042">example</a>):</li>
<li><code>version</code> reducer in <code>StandardRouter</code></li>
<li><code>loadVersion</code> action in <code>initialActions</code></li>
<li><code>version</code> and <code>loadAfterTheme</code> selectors to <code>StandardRouter</code> state.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// Example</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">versionSelector</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../MapStore2/web/client/selectors/version&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">loadVersion</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../MapStore2/web/client/actions/version&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../MapStore2/web/client/actions/version&#39;</span><span class="p">);</span>
<span class="c1">//...</span>
<span class="nx">StandardRouter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">connect</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">locale</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">locale</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nx">pages</span><span class="p">,</span>
<span class="w">        </span><span class="nx">version</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">versionSelector</span><span class="p">(</span><span class="nx">state</span><span class="p">),</span>
<span class="w">        </span><span class="nx">loadAfterTheme</span><span class="o">:</span><span class="w"> </span><span class="nx">loadAfterThemeSelector</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span>
<span class="w">    </span><span class="p">}))(</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../MapStore2/web/client/components/app/StandardRouter&#39;</span><span class="p">))</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">appStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../MapStore2/web/client/stores/StandardStore&#39;</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">initialState</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="nx">version</span>
<span class="p">});</span>
<span class="c1">// ...</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">appConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="nx">initialActions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">loadVersion</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Add to your <code>pom.xml</code> some execution steps to replace html files with the ones generated in 'dist' directory. (<a href="https://github.com/geosolutions-it/MapStore2/pull/2538/files#diff-eef89535a29b4a95a42d9de83cb53681">example</a>). And copy <code>version.txt</code></li>
<li>Override the version file in your build process (e.g. you can use the commit hash)</li>
</ul>
<h2 id="migration-from-20170500-to-20170300-and-previews">Migration from 2017.05.00 to 2017.03.00 and previews</h2>
<p>In <strong>2017.03.00</strong> the <code>createProject.js</code> script created only a custom project. From version 2017.04.00 we changed the script to generate 2 kind of projects:</p>
<ul>
<li><strong>custom</strong>: the previous version</li>
<li><strong>standard</strong>: mapstore standard</li>
</ul>
<p>Standard project wants to help to generate a project that is basically the MapStore product, where you can add your own plugins and customize your theme (before this you had to create a project similar to MapStore on your own)
Depending on our usage of custom project, this may introduce some breaking changes.
If you previously included some file from <code>product</code> folder, now <code>app.jsx</code> has been changed to call <code>main.jsx</code>. Please take a look on how the main product uses this to migrate your changes inside your custom project.</p>
<h2 id="migration-from-20170100-to-20170200">Migration from 2017.01.00 to 2017.02.00</h2>
<p>The version 2017.02.00 has many improvements and changes:</p>
<ul>
<li>introduced <code>redux-observable</code></li>
<li>updated <code>webpack</code> to version 2</li>
<li>updated <code>react-intl</code> to version 2.x</li>
<li>updated <code>react</code> to [version 15.4.2] (<a href="https://facebook.github.io/react/blog/2016/04/07/react-v15.html">https://facebook.github.io/react/blog/2016/04/07/react-v15.html</a>)</li>
<li>updated <code>react-bootstrap</code> to version 0.30.7</li>
</ul>
<p>We suggest you to:</p>
<ul>
<li>align your package.json with the latest version of 2017.02.00.</li>
<li>update your webpack files (see below).</li>
<li>update your tests to react 15 version. <a href="https://facebook.github.io/react/blog/2016/04/07/react-v15.html#upgrade-guide">see upgrade guide</a></li>
<li>Update your <code>react-bootstrap</code> custom components with the new one (see below).</li>
</ul>
<h3 id="side-effect-management-introduced-redux-observable">Side Effect Management - Introduced redux-observable</h3>
<p>To manage complex asynchronous operations the thunk middleware is not enough.
When we started with MapStore there was no alternative to thunk. Now we have some options. After a spike (results available <a href="https://github.com/geosolutions-it/MapStore2/issues/1420">here</a>) we chose to use redux-observable.
For the future, we strongly recommend to use this library to perform asynchronous tasks.</p>
<p>Introducing this library will allow to :</p>
<ul>
<li>remove business logic from the components event handlers</li>
<li>now all new  <code>actionCreators</code> should return pure actions. All async stuff will be deferred to the epics.</li>
<li>avoid bouncing between components and state to trigger side effect</li>
<li>speed up development with <code>rxjs</code> functionalities</li>
<li>Existing thunk integration will be maintained since all the thunks will be replaced.</li>
</ul>
<p>If you are using the Plugin system and the StandardStore, you may have only to include the missing new dependencies in your package.json (redux-observable and an updated version of redux).</p>
<p>Check the current package.json to get he most recent versions. For testing we included also redux-mockup-store as a dependency, but you are free to test your epics as you want.</p>
<p>For more complex integrations check <a href="https://github.com/geosolutions-it/MapStore2/pull/1471">this</a> pull request to see how to integrate redux-observable or follow the guide on the <a href="https://redux-observable.js.org/">redux-observable site</a>.</p>
<h3 id="webpack-update-to-version-2">Webpack update to version 2</h3>
<p>We updated webpack (old one is deprecated), check <a href="https://github.com/geosolutions-it/MapStore2/pull/1491">this pull request</a> to find out how to update your webpack files.
here a list of what we had to update:</p>
<ul>
<li>module.loaders are now module.rules</li>
<li>update your package.json with latest versions of webpack, webpack plugins and karma libs and integrations (Take a look to the changes on package.json in the pull request if you want a detailed list of what to update in this case).</li>
<li>change your test proxy configuration with the new one.</li>
</ul>
<p>More details on the <a href="https://webpack.js.org/migrate/">webpack site</a>.</p>
<h3 id="react-intl-update-to-2x">react-intl update to  2.x</h3>
<p>See <a href="https://github.com/geosolutions-it/MapStore2/pull/1495/files">this pull request</a> for the details. You should only have to update your package.json</p>
<h3 id="react-update-to-1542">react update to 15.4.2</h3>
<p>Check this pull request to see how to:</p>
<ul>
<li>update your package.json</li>
<li>update your tests</li>
</ul>
<h3 id="react-bootstrap-update">React Bootstrap update</h3>
<p>The version we are using is not documented anymore, and not too much compatible with react 15 (too many warnings). So this update can not be postponed anymore.
The bigger change in this case is that the Input component do not exists anymore. You will have to replace all your Input with the proper components, and update the <code>package.json</code>. See <a href="https://github.com/geosolutions-it/MapStore2/pull/1511">this pull request</a> for details.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    
      
      <!-- customized wrapping nav in this div to apply the color -->
      <div class="md-footer-nav">
      <nav
        class="md-footer__inner md-grid"
        aria-label="Footer"
        
      >

        <!-- Link to previous page -->
        
          
          <a
            href="../documentation-guidelines/"
            class="md-footer__link md-footer__link--prev"
            aria-label="Previous: Documentation"
            rel="prev"
          >
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Documentation
              </div>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          
          <a
            href="../release/"
            class="md-footer__link md-footer__link--next"
            aria-label="Next: Release"
            rel="next"
          >
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Release
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
        </div>
    
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <b><a href="https://mapstore.geosolutionsgroup.com" target="_blank">MapStore&copy;</a></b> is Free and Open Source software and is licensed under the Simplified BSD License.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
    <!-- Customization -->
    <div class="custom-footer-section md-grid">
        <div>
            <small>If you find something in this documentation that requires further clarifications, it is not correct or does not match your experience with MapStore, please report a <b><a href="" target="_blank">documentation issue</a></b> on GitHub.</small>
            <br/>
            <small>We also welcome any contributions, take a look at our <b><a href="" target="_blank">issues</a></b> on GitHub.</small>
        </div>
        <div>
            Play with the <b><a href="https://mapstore.geosolutionsgroup.com" target="_blank">MapStore online Demo</a></b>.
        </div>
        <div className="md-footer-brand">
            <a href="http://www.geo-solutions.it" target="_blank">
                   <img class="md-footer-brand-img" src="../../img/geosolutions-brand.png">
            </a>
        </div>
        <div>
            <small>GeoSolutions | sales@geosolutionsgroup.com </small>
        </div>
        </div>
      <!-- End of customization-->
      <!-- Social links -->
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/geosolutions-it" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/geosolutions_it" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://it.linkedin.com/company/geosolutions-s-a-s-" target="_blank" rel="noopener" title="it.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.instant", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.indexes", "navigation.footer", "content.code.copy"], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.78eede0e.min.js"></script>
      
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.6.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>